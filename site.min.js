function Login_ShowErrorSection(e,t){null==e?$(t).hide():$(t).html(e).show()}function validateEmail(e){var t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(String(e).toLowerCase())}function Login(e,t,a){if(Login_ShowErrorSection(null,"#LoginError"),validateEmail(e)){if(""!=t)return $.post("../../Account/Login",{EmailAddress:e,Password:t,RememberMe:a},function(e){if(e.Success)Login_ShowErrorSection(null,"#LoginError"),AfterLoginCallback?AfterLoginCallback(function(){window.location.reload()}):window.location.reload(),AfterLoginCallback=null;else{var t=e.Message;null!=e.Data&&null!=e.Data.EmailActivationKey&&null!=e.Data.EmailActivationKey&&(t+='<br /><a href="../../Account/ConfirmEmailAddress?Act='+e.Data.EmailActivationKey+'" >Temporary Activation Link</a>'),Login_ShowErrorSection(t,"#LoginError")}},"json"),!1;Login_ShowErrorSection(Resource["Enter your password."],"#LoginError")}else Login_ShowErrorSection(Resource["Enter a valid email address."],"#LoginError")}function translateElementText(e){var t=$("#"+e).text().trim();$.post("../../Home/Translate",{Text:t},function(t){$("#"+e+" #Error").remove(),t.Success?($("#"+e).attr("data-originalBeforeTranslate",encodeURI($("#"+e).html())),$("#"+e).html(t.Data)):$("#"+e).append('<div class="alert alert-danger" style="direction:rtl; text-align:right;">'+t.Message+"</div>")},"json")}function IsLoggedIn(e){$.post("../../Account/IsLoggedIn",{},function(t){e(t.Data.IsLoggedIn)},"json")}function Signup(e,t,a,r){if(Login_ShowErrorSection(null,"#SignupError"),""!=e)if(validateEmail(t))if(""!=a){if(a==r)return $.post("../../Account/Signup",{FullName:e,EmailAddress:t,Password:a},function(e){e.Success?(Login_ShowErrorSection(null,"#SignupError"),$("#SignupSuccess").html(e.Message).show()):Login_ShowErrorSection(e.Message,"#SignupError")},"json"),!1;Login_ShowErrorSection(Resource["The password and its repetition are not the same."],"#SignupError")}else Login_ShowErrorSection(Resource["Enter your password."],"#SignupError");else Login_ShowErrorSection(Resource["Enter a valid email address."],"#SignupError");else Login_ShowErrorSection("Enter your full name.","#SignupError")}function Logout(){return $.post("../../Account/Logout",{},function(e){window.location="../../../../"},"json"),!1}function ForgotPassword(e){if(Login_ShowErrorSection(null,"#ForgetPasswordError"),validateEmail(e))return $.post("../../Account/ForgotPassword",{EmailAddress:e},function(e){e.Success?(Login_ShowErrorSection(null,"#ForgetPasswordError"),$("#ForgetPasswordSuccess").html(e.Message).show()):Login_ShowErrorSection(e.Message,"#ForgetPasswordError")},"json"),!1;Login_ShowErrorSection("Enter a valid email address.","#ForgetPasswordError")}function ResetPassword(e,t,a){if(Login_ShowErrorSection(null,"#ResetPasswordError"),""!=t){if(t==a)return $.post("../../Account/DoResetPassword",{Key:e,NewPassword:t},function(e){e.Success?(Login_ShowErrorSection(null,"#ResetPasswordError"),""!=e.Message&&($("#ResetPasswordSuccess").html(e.Message).show(),setTimeout(function(){window.location="../../../../"},1e3))):Login_ShowErrorSection(e.Message,"#ResetPasswordError")},"json"),!1;Login_ShowErrorSection(Resource["The password and its repetition are not the same."],"#ResetPasswordError")}else Login_ShowErrorSection(Resource["Enter your password."],"#ResetPasswordError")}function BuyNow(e){try{IsLoggedIn(function(t){t?ShowConfirmModal(Resource["Buy Resource"],Resource["Are you sure you want to purchase this file through your account?"],function(){$.post("../../Home/BuyResourceNow",{ResourceId:e},function(t){t.Success?window.location="../../Item/?id="+e:null!=t.Data&&t.Data.AlreadyBought?window.location="../../Item/?id="+e:t.InsufficientCredit?ShowErrorModal(Resource.Error,Resource["You don't have enough credit to buy this resource!"],'<a href="../../Account/CreditCharge?ri='+e+'" class="ExtraButton btn btn-success" '+(SiteRTL?'style="margin-left:0.25rem;"':"")+">"+Resource["Charge Credit"]+"</a>"):ShowErrorModal(Resource.Error,t.Message)},"json")}):($("#LoginModal").modal("show"),AfterLoginCallback=function(t){$("#LoginModal").modal("hide"),BuyNow(e)})})}catch(e){}return!1}function AddToCart(e,t){try{$.post("../../Home/AddToCart",{ResourceId:t},function(a){a.Success?(ManageBasketNotificationInHeader(a.Data.ResourcesInBasket,a.Data.BoughtResources),$(e).hide(),$(e).parent().find(".RemoveFromCartButton").show()):"GoToLogin"==a.Message?($("#LoginModal").modal("show"),AfterLoginCallback=function(a){AddToCart(e,t),a()}):ShowErrorModal(Resource.Error,a.Message)},"json")}catch(e){}return!1}function RefreshCartFormPrices(){$("#TotalPrice").html(ReplaceLatinDigits(("$"==Currency?CartFormTotalPrice.toFixed(2).replace(".",'<span style="font-weight: bold; font-size: 120%; line-height: 20%; margin: 0px 3px;">.</span>'):CartFormTotalPrice.toString()).replace(/\B(?=(\d{3})+(?!\d))/g,","))),$("#UserCredit").html(ReplaceLatinDigits(("$"==Currency?CartFormCredit.toFixed(2).replace(".",'<span style="font-weight: bold; font-size: 120%; line-height: 20%; margin: 0px 3px;">.</span>'):CartFormCredit.toString()).replace(/\B(?=(\d{3})+(?!\d))/g,",")));var e=CartFormTotalPrice;$("#UseCreditCheckbox").prop("checked")&&(e-=CartFormCredit),e=e<0?0:e,$("#FinalPrice").html(ReplaceLatinDigits(("$"==Currency?e.toFixed(2).replace(".",'<span style="font-weight: bold; font-size: 120%; line-height: 20%; margin: 0px 3px;">.</span>'):e.toString()).replace(/\B(?=(\d{3})+(?!\d))/g,","))),0==e?($("[id*=btnPayment").css("opacity","0"),setTimeout(function(){$("#PaymentMethodsHolder").height(0)},300),$("[id*=btnPayment]").each(function(){$(this).attr("disabled","disabled").removeClass("SelectedPaymentMethod")}),$("#PayAndDownloadButton").removeAttr("disabled")):"fa"!=SiteLang?($("#PaymentMethodsHolder").height(60),setTimeout(function(){$("[id*=btnPayment").css("opacity","1")},300),$("[id*=btnPayment]").each(function(){"true"==$(this).attr("data-disabled")?$(this).attr("disabled","disabled").removeClass("SelectedPaymentMethod"):$(this).removeAttr("disabled")}),$("#PayAndDownloadButton").attr("disabled","disabled")):$("#PayAndDownloadButton").removeAttr("disabled")}function RemoveFromCart(e,t,a){try{$.post("../../Home/RemoveFromCart",{ResourceId:t},function(t){t.Success?(ManageBasketNotificationInHeader(t.Data.ResourcesInBasket,t.Data.BoughtResources),a?($(e).parent().parent().remove(),0==t.Data.ResourcesInBasket.length?window.location="../../../":$.post("../../Home/GetUserCredit",{},function(e){CartFormTotalPrice=e.Data.TotalPrice,CartFormCredit=e.Data.Credit,RefreshCartFormPrices()})):($(e).hide(),$(e).parent().find(".AddToCartButton").show()),0==window.location.pathname.toLowerCase().indexOf("/account/cart")&&LoadBasketItems()):ShowErrorModal(Resource.Error,t.Message)},"json")}catch(e){}return!1}function EmptyCart(){try{$.post("../../Home/EmptyCart",{},function(e){e.Success?window.location="../../../":ShowErrorModal(Resource.Error,e.Message)},"json")}catch(e){}return!1}function ManageBasketNotificationInHeader(e,t){0==e.length?($("#SiteBanner").removeClass("HiddenForNotification"),$("#BuyBasketIconInsteadOfBanner").addClass("HiddenNotification"),$("#BuyBasketIcon").addClass("HiddenNotification"),$("[id=CartSmallView]").addClass("collapsed")):($("#SiteBanner").addClass("HiddenForNotification"),$("#BuyBasketIconInsteadOfBanner").removeClass("HiddenNotification"),$("#BuyBasketIcon").removeClass("HiddenNotification"));var a=[];0==window.location.pathname.toLowerCase().indexOf("/item")?a[0]=GetWindowLocationSearchParameters().id:0==window.location.pathname.toLowerCase().indexOf("/search")&&$(".AddToCartButton").each(function(){a[a.length]=$(this).attr("data-resId")});for(var r=0;r<a.length;r++){for(var o=a[r],i=!1,n=0;n<e.length;n++)if(e[n].Id==o){i=!0;break}var s=!1;for(n=0;n<t.length;n++)if(t[n]==o){s=!0;break}var l=$(".AddToCartButton[onclick*="+o+"]"),d=$(".RemoveFromCartButton[onclick*="+o+"]"),c=$(".BoughtButton[data-resId="+o+"]");i?"none"==$(d).css("display")&&($(l).css("display","none"),$(d).css("display","inline-block")):s?"/Item/"==window.location.pathname?0!=l.length&&window.location.reload():"none"==$(c).css("display")&&($(c).css("display","inline-block"),$(l).css("display","none"),$(d).css("display","none")):"none"==$(l).css("display")&&($(l).css("display","inline-block"),$(d).css("display","none"))}$("[id=BuyBasketCount]").html(e.length);var u='<table style="width:298px; max-width:298px;">',h=0;for(n=0;n<e.length;n++)u+='<tr class="CartItemTR">    <td style="width:1px; border:1px solid #ddd; background:#fff; border-right:none; border-radius:3px 3px 0px 0px; vertical-align:top;">        <img style="width:60px; height:'+60*e[n].ThumbSmallHeight/e[n].ThumbSmallWidth+'px; margin:7px; margin-bottom:3px;" src="../../../Resources/ThumbSmall/'+e[n].ContentTypeName+"/"+e[n].ThumbSmall+'" />        <button class="btn btn-danger btn-sm" style="padding:0px 3px; width:60px; margin:7px; margin-top:-13px; margin-bottom:0px;" onclick="RemoveFromCart(null, \''+e[n].Id+'\', false);"><i style="font-size: 140%;position: relative;right: 0px; top: 1px;" class="fa fa-times-circle"></i></button>    </td>    <td class="TitleTD" style="width:99%; border:1px solid #ddd; background:#fff; border-left:none; border-radius:0px 0px 3px 3px; font-size:60%; vertical-align:top; line-height:1.8; position:relative;">        '+e[n].Title+'    </td></tr><tr><td style="height:4px;"></td></tr>',h+=e[n].Price;u+="</table>",$("#CartSmallView #CartItems").html(u),$("#CartSmallView #TotalBasketPrice").html(ReplaceLatinDigits(("$"==Currency?h.toFixed(2).replace(".",'<span style="font-weight: bold; font-size: 120%; line-height: 20%; margin: 0px 3px;">.</span>'):h.toString()).replace(/\B(?=(\d{3})+(?!\d))/g,","))),$("#CartSmallView #CartItems table > tbody > tr.CartItemTR").each(function(){for(var e=$(this).find("img").height(),t=e+70,a=$(this).find(".TitleTD");$(this).height()>t;){var r=$(a).html().trim(),o=r.split(" ");"..."==o[o.length-1]&&o.splice(o.length-1,1);for(var i="",n=0;n<o.length-1;n++)i=i+" "+o[n];$(a).html(i+" ...")}})}function ToggleCartView(){$("#CartSmallView").hasClass("collapsed")?$("[id=CartSmallView]").removeClass("collapsed"):$("[id=CartSmallView]").addClass("collapsed")}function FetchUserNotifications(e){$.post("../../Home/GetUserNotifications",{Immediately:null==e},function(e){e.Success&&null!=e.Data&&(ManageBasketNotificationInHeader(e.Data.ResourcesInBasket,e.Data.BoughtResources),0==e.Data.UserTickets?$("#TicketIcon #TicketCount").parent().hide():$("#TicketIcon #TicketCount").parent().show(),$("#TicketIcon #TicketCount").html(e.Data.UserTickets),$("#CreditIcon #CreditAmount").html(ReplaceLatinDigits(e.Data.UserCredit.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","))),e.Data.AdminTicketsCount+e.Data.AdminContactUsCount==0?$("#AdminPanelIcon #AdminTicketCount").parent().hide():$("#AdminPanelIcon #AdminTicketCount").parent().show(),$("#AdminPanelIcon #AdminTicketCount").html(e.Data.AdminTicketsCount+e.Data.AdminContactUsCount).attr("title",e.Data.AdminTicketsCount+" Tickets & "+e.Data.AdminContactUsCount+" Contact Us Messages"),$("#AdminTicketCount_Ticket").html(e.Data.AdminTicketsCount),0==e.Data.AdminTicketsCount?$("#AdminTicketCount_Ticket").parent().hide():$("#AdminTicketCount_Ticket").parent().show(),$("#AdminTicketCount_ContactUs").html(e.Data.AdminContactUsCount),0==e.Data.AdminContactUsCount?$("#AdminTicketCount_ContactUs").parent().hide():$("#AdminTicketCount_ContactUs").parent().show()),setTimeout(function(){FetchUserNotifications(!0)},2e3)})}function ResourceClicked(e){if(ResourceNotClicked||ResourceDescriptionToggleJustClicked)return!1}function getForegroundColor(e){var t=parseInt("0x"+e.substring(1,3)),a=parseInt("0x"+e.substring(3,5)),r=parseInt("0x"+e.substring(5,7)),o=Math.sqrt(.299*Math.pow(t,2)+.587*Math.pow(a,2)+.114*Math.pow(r,2));return o>150?"#000":"#fff"}function ReplaceLatinDigits(e){return"fa"!=SiteLang?e:e.replace(/0/gi,"۰").replace(/1/gi,"۱").replace(/2/gi,"۲").replace(/3/gi,"۳").replace(/4/gi,"۴").replace(/5/gi,"۵").replace(/6/gi,"۶").replace(/7/gi,"۷").replace(/8/gi,"۸").replace(/9/gi,"۹")}function resourcesDraw(e,t,a,r,o){null!=r&&null!=r||(r="#ResourcesContainer"),null!=o&&null!=o||(o="#ResourcesContainerHidden"),null==t&&(t=0),0==t&&($("#resourcesPagination").hide(),$(r).height($(window).height()-200),$(r).css("overflow","hidden"),$(r).html(""));var i=Math.min(100,100*window.outerWidth/500),n=-1!=r.indexOf("files_");if(IsMobile||n){var s=Math.min(1.05,1.05*Math.cbrt(window.outerWidth/550)),l=Math.min(100,100*Math.max(85,Math.cbrt(window.outerWidth/550))),d="",c=e[t].Authors;if(null!=c&&""!=c){var u=GetWindowLocationSearchParameters().Author;u=null==u||null==u?"":u,d='<span class="markable" data-searchedAuthors="'+u+'" >'+c+"</span>"}var h=e[t],p="background-color:"+TypesColors[e[t].Type]+";",g=(e[t].Type.replace(" ",""),'<a data-index="'+t+'" href="../../../Item/?id='+h.Id+'" onclick="ResourceClicked($(this));" class="list-group-item list-group-item-action d-flex" style="padding: 0.5rem 0.6rem; box-shadow: 0 4px 10px 0 rgba(0,0,0,0.1), 0 0 0 1px rgba(0,0,0,0.05); font-size:'+l+'%; visibility:hidden;"><table style="width:100%;">    <tr>        <td colspan="2">            <h5 class="resourceTitle list-group-item-heading markable TitleForContentType'+h.ContentTypeName+'" data-title="'+encodeURI(stripHtml(h.Title))+'" style="margin-bottom:0.25rem; font-weight:600 !important; font-size: '+s+'rem;" >'+stripHtml(h.Title)+'</h5>        </td>        <td rowspan="3" style="height:1px; width:11px;" class="ContentTypeTransformedLabel">            <div style="width:20px; min-width:20px; height:calc(100% + 20px); margin: -12px -11px -12px 0px; border-radius: 0 0.25rem 0.25rem 0;'+p+'">                <div style="transform: rotate(90deg); color:'+getForegroundColor(TypesColors[e[t].Type])+'; position: relative; top: 4px; left:2px;">'+e[t].Type.replace("Engineering Doc","Eng.Doc").replace(" ","fa"==SiteLang?"&nbsp;":" ")+' </div>            </div>        </td>    </tr>    <tr>        <td style="vertical-align:top; width:'+(i+10)+'px;">            <img style="display:block; width:'+i+"px; height:"+h.ThumbSmallHeight*i/h.ThumbSmallWidth+'px;" src="../../../Resources/ThumbSmall/'+h.ContentTypeName+"/"+h.ThumbSmall+'" />        </td>        <td style="vertical-align:top;">            <table style="color:#777; font-size:90%;">                <tr>                    <td style="width:1%; color: #18ae59; font-weight: bold;">Year: </td>                    <td style="padding:0px 20px 0px 10px; font-weight:600;">'+h.Year+"</td>                </tr>"+(""==d||n?"":'                <tr>                    <td style="width:1%; color: #18ae59; font-weight: bold;">Author(s): </td>                    <td style="padding:0px 20px 0px 10px; font-weight:600;">'+d+"</td>                </tr>")+("Ebook"==h.ContentTypeName||"Training"==h.ContentTypeName||"Standard"==h.ContentTypeName||"Paper"==h.ContentTypeName?'                <tr>                    <td style="width:1%; color: #18ae59; font-weight: bold;">Publisher: </td>                    <td style="padding:0px 20px 0px 10px; font-weight:600;" class="resourcePublisher" data-publisher="'+encodeURI(stripHtml(h.Publisher))+'" >'+h.Publisher+"</td>                </tr>":"")+("Ebook"!=h.ContentTypeName||n?"":'                <tr>                    <td style="width:1%; color: #18ae59; font-weight: bold;">Edition: </td>                    <td style="padding:0px 20px 0px 10px; font-weight:600;">'+h.Edition+"</td>                </tr>")+("Paper"==h.ContentTypeName?'                <tr>                    <td style="width:1%; color: #18ae59; font-weight: bold;">Journal: </td>                    <td style="padding:0px 20px 0px 10px; font-weight:600;" class="resourceJournal" data-journal="'+encodeURI(stripHtml(h.JournalName))+'" >'+h.JournalName+"</td>                </tr>":"")+("Paper"!=h.ContentTypeName||n||""==h.Volume?"":'                <tr>                    <td style="width:1%; color: #18ae59; font-weight: bold;">Volume: </td>                    <td style="padding:0px 20px 0px 10px; font-weight:600;">'+h.Volume+"</td>                </tr>")+("Paper"!=h.ContentTypeName||n||""==h.Issue?"":'                <tr>                    <td style="width:1%; color: #18ae59; font-weight: bold;">Issue: </td>                    <td style="padding:0px 20px 0px 10px; font-weight:600;">'+h.Issue+"</td>                </tr>")+(n?'                <tr>                    <td colspan="2">                        <p class="list-group-item-text resourceDescription contentType'+h.ContentTypeName+' markable" style="margin-bottom:0; font-weight:400;" data-description="'+encodeURI(stripHtml(h.Description))+'" ></p>                    </td>                </tr>':"")+"            </table>        </td>    </tr>"+(n?"":'    <tr>        <td colspan="2">            <p class="list-group-item-text resourceDescription contentType'+h.ContentTypeName+' markable" style="margin-bottom:0; font-weight:400;" data-description="'+encodeURI(stripHtml(h.Description))+'" ></p>        </td>    </tr>')+"</table></div></a>");$(r).append(g),TruncateSection(r,"resourceDescription","data-description",!n,window.outerWidth>630?3:4,t),TruncateSection(r,"resourceTitle","data-title",!1,window.outerWidth>630?2:3,t),TruncateSection(r,"resourcePublisher","data-publisher",!1,0,t),TruncateSection(r,"resourceJournal","data-journal",!1,0,t),ShowAuthors(t),HighlightSearchWords(null,t),$(r+" > a").appendTo(o),$(r+" > a").remove(),t!=e.length-1?setTimeout(function(){resourcesDraw(e,t+1,a,r,o)},10):a&&($(r).css("height","").css("overflow",""),$(o+" > a").each(function(){$(this).appendTo(r)}),$(o).html(""),$(r+" > a").css("visibility",""),$("#resourcesPagination").show(),a(),MathJax.Hub.Typeset(),setTimeout(function(){$(".AddToCartButton").each(function(){if($(this).is(":visible")){var e=20+$(this).parent().parent().offset().top+$(this).parent().parent().height()-($(this).offset().top+$(this).height());$(this).parent().children(".AddToCartButton").css("margin-top",e+"px"),$(this).parent().children(".BoughtButton").css("margin-top",e+"px"),$(this).parent().children(".RemoveFromCartButton").css("margin-top",e+"px")}}),$(".BoughtButton").each(function(){if($(this).is(":visible")){var e=20+$(this).parent().parent().offset().top+$(this).parent().parent().height()-($(this).offset().top+$(this).height());$(this).parent().children(".AddToCartButton").css("margin-top",e+"px"),$(this).parent().children(".BoughtButton").css("margin-top",e+"px"),$(this).parent().children(".RemoveFromCartButton").css("margin-top",e+"px")}}),$(".RemoveFromCartButton").each(function(){if($(this).is(":visible")){var e=20+$(this).parent().parent().offset().top+$(this).parent().parent().height()-($(this).offset().top+$(this).height());$(this).parent().children(".AddToCartButton").css("margin-top",e+"px"),$(this).parent().children(".BoughtButton").css("margin-top",e+"px"),$(this).parent().children(".RemoveFromCartButton").css("margin-top",e+"px")}})},300))}else{d="",c=e[t].Authors;if(null!=c&&""!=c){u=GetWindowLocationSearchParameters().Author;u=null==u||null==u?"":u,d='<span class="markable" style="font-weight:600;" data-searchedAuthors="'+u+'" >&nbsp;'+c+"</span>"}h=e[t],p="background-color:"+TypesColors[e[t].Type]+";",e[t].Type.replace(" ",""),g='<a data-index="'+t+'" href="../../../Item/?id='+h.Id+'" target="_blank" onclick="ResourceClicked($(this));" class="list-group-item list-group-item-action d-flex" style="box-shadow: 0 4px 10px 0 rgba(0,0,0,0.1), 0 0 0 1px rgba(0,0,0,0.05); visibility:hidden;">    <div class="flex-grow-0">        <img style="display:block; width:100px; height:'+100*h.ThumbSmallHeight/h.ThumbSmallWidth+'px;" src="../../../Resources/ThumbSmall/'+h.ContentTypeName+"/"+h.ThumbSmall+'" />'+(-1!=r.indexOf("files_")?"":'        <button class="BoughtButton btn btn-success btn-sm" data-resId="'+h.Id+'" style="'+("Bought"==h.State?"":"display:none;")+' padding:0px 3px; width: 100%; margin-top:10px;" onclick="return false;" ><center style="margin-bottom:4px; font-size:90%;">'+Resource.Purchased+"</center></button>        "+("CartItem"==h.State?"":'<button class="AddToCartButton btn btn-info btn-sm" style="position:relative; '+("Basket"==h.State||"Bought"==h.State?"display:none;":"")+'padding:0px 3px; width: 100%; margin-top:10px;" onclick="ResourceNotClicked = true; setTimeout(function () { ResourceNotClicked = false; }, 100); AddToCart($(this), \''+h.Id+'\'); return false;" data-resId="'+h.Id+'" ><table cellpadding="0" cellspacing="0"><tr><td style="font-size:'+("ریال"==Currency?"70%":"100%")+';">'+Currency+"&nbsp;</td><td>"+ReplaceLatinDigits(("$"==Currency?h.Price.toFixed(2).replace(".",'<span style="font-weight: bold; font-size: 120%; line-height: 20%; margin: 0px 3px;">.</span>'):h.Price.toString()).replace(/\B(?=(\d{3})+(?!\d))/g,","))+'</td><td><i style="font-size: 140%;position: absolute;right: 2px;top: 2px;" class="fa fa-plus-circle"></i></td></tr></table></button>')+'        <button class="RemoveFromCartButton btn btn-danger btn-sm" style="position:relative; '+("Basket"!=h.State&&"CartItem"!=h.State?"display:none;":"")+'padding:0px 3px; width: 100%; margin-top:10px;" onclick="ResourceNotClicked = true; setTimeout(function () { ResourceNotClicked = false; }, 100); RemoveFromCart($(this), \''+h.Id+'\', false); return false;" data-resId="'+h.Id+'" ><table cellpadding="0" cellspacing="0"><tr><td style="font-size:'+("ریال"==Currency?"70%":"100%")+';">'+Currency+"&nbsp;</td><td>"+ReplaceLatinDigits(("$"==Currency?h.Price.toFixed(2).replace(".",'<span style="font-weight: bold; font-size: 120%; line-height: 20%; margin: 0px 3px;">.</span>').replace(".",'<span style="font-weight: bold; font-size: 120%; line-height: 20%; margin: 0px 3px;">.</span>'):h.Price.toString()).replace(/\B(?=(\d{3})+(?!\d))/g,","))+'</td><td><i style="font-size: 140%; position: absolute; right: 2px; top: 2px;" class="fa fa-times-circle"></i></td></tr></table></button>')+'    </div>    <div class="ml-3 flex-grow-1" style="padding-right:5px;">        <h5 class="list-group-item-heading markable TitleForContentType'+h.ContentTypeName+'" style="margin-bottom:0.25rem; font-weight:600 !important; font-size: 1.15rem;" >'+stripHtml(h.Title)+'</h5>            <table style="color:#777; font-size:80%; margin:8px 0px;">                <tr>                    <td style="color: #18ae59; font-weight: bold;">Year:                     </td>                    <td style="padding:0px 20px 0px 10px;"><span style="font-weight:600;">&nbsp;'+h.Year+"</span>                    </td>"+("Ebook"==h.ContentTypeName||"Training"==h.ContentTypeName||"Standard"==h.ContentTypeName||"Paper"==h.ContentTypeName?'                    <td style="color: #18ae59; font-weight: bold;">Publisher:                     </td>                    <td style="padding:0px 20px 0px 10px;"><span style="font-weight:600;">&nbsp;'+h.Publisher+"</span>                    </td>":"")+("Ebook"==h.ContentTypeName?'                    <td style="color: #18ae59; font-weight: bold;">Edition:                     </td>                    <td style="padding:0px 20px 0px 10px;"><span style="font-weight:600;">&nbsp;'+h.Edition+"</span>                    </td>":"")+(""!=d?'                    <td style="color: #18ae59; font-weight: bold;">Author(s):                     </td>                    <td style="padding:0px 20px 0px 10px;">'+d+"                    </td>":"")+"                </tr>            </table>"+("Paper"==h.ContentTypeName?'            <table style="color:#777; font-size:80%; margin:8px 0px;">                <tr>                    <td style="color: #18ae59; font-weight: bold;">Journal:                     </td>                    <td colspan="5" style="padding:0px 20px 0px 10px;"><span style="font-weight:600;">&nbsp;'+h.JournalName+(""!=h.Volume?'&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight:normal;">Volume: </span>'+h.Volume:"")+(""!=h.Issue?'&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight:normal;">Issue: </span>'+h.Issue:"")+"</span>                    </td>                    <td>                </tr>            </table>":"")+'        <p class="list-group-item-text resourceDescription contentType'+h.ContentTypeName+' markable" style="margin-bottom:0; font-weight:400;" data-description="'+encodeURI(stripHtml(h.Description))+'" ></p>    </div>    <div class="flex-grow-0" style="min-width:10px;"></div>    <div class="flex-grow-0 flex-shrink-0" style="width:20px; min-width:20px; margin: -12px -20px -12px 0px; border-radius: 0 0.25rem 0.25rem 0;'+p+'">        <div style="transform: rotate(90deg); color:'+getForegroundColor(TypesColors[e[t].Type])+'; position: relative; top: 4px; left:2px;">'+e[t].Type.replace("Engineering Doc","Eng.Doc").replace(" ","fa"==SiteLang?"&nbsp;":" ")+" </div>    </div></a>";$(r).append(g),TruncateSection("#ResourcesContainer","resourceDescription","data-description",!0,2,t),ShowAuthors(t),HighlightSearchWords(null,t),$(r+" > a").appendTo(o),$(r+" > a").remove(),t!=e.length-1?setTimeout(function(){resourcesDraw(e,t+1,a,r,o)},10):a&&($(r).css("height","").css("overflow",""),$(o+" > a").each(function(){$(this).appendTo(r)}),$(o).html(""),$(r+" > a").css("visibility",""),$("#resourcesPagination").show(),a(),MathJax.Hub.Typeset(),setTimeout(function(){$(".AddToCartButton").each(function(){if($(this).is(":visible")){var e=20+$(this).parent().parent().offset().top+$(this).parent().parent().height()-($(this).offset().top+$(this).height());$(this).parent().children(".AddToCartButton").css("margin-top",e+"px"),$(this).parent().children(".BoughtButton").css("margin-top",e+"px"),$(this).parent().children(".RemoveFromCartButton").css("margin-top",e+"px")}}),$(".BoughtButton").each(function(){if($(this).is(":visible")){var e=20+$(this).parent().parent().offset().top+$(this).parent().parent().height()-($(this).offset().top+$(this).height());$(this).parent().children(".AddToCartButton").css("margin-top",e+"px"),$(this).parent().children(".BoughtButton").css("margin-top",e+"px"),$(this).parent().children(".RemoveFromCartButton").css("margin-top",e+"px")}}),$(".RemoveFromCartButton").each(function(){if($(this).is(":visible")){var e=20+$(this).parent().parent().offset().top+$(this).parent().parent().height()-($(this).offset().top+$(this).height());$(this).parent().children(".AddToCartButton").css("margin-top",e+"px"),$(this).parent().children(".BoughtButton").css("margin-top",e+"px"),$(this).parent().children(".RemoveFromCartButton").css("margin-top",e+"px")}})},300))}}function resourcesFilterDraw(e,t,a,r,o){FindPublisherLastSearched=null,FindPublisherShowingIndex=-1,FindPublisherFoundResult=[],$("#FilterPublishers mark").each(function(){$(this).replaceWith($(this).html())}),$("#FindPublisher_Count").html("0/0"),FindJournalLastSearched=null,FindJournalShowingIndex=-1,FindJournalFoundResult=[],$("#FilterJournals mark").each(function(){$(this).replaceWith($(this).html())}),$("#FindJournal_Count").html("0/0"),redrawFilterSection(AllFilterTypes,e,$("#FilterTypes"),"Type"),redrawFilterSection(AllFilterPublishers,t,$("#FilterPublishers"),"Publisher"),redrawFilterSection(AllFilterJournals,a,$("#FilterJournals"),"Journal"),redrawFilterSection(AllFilterCategories,r,$("#FilterCategories"),"Category"),redrawFilterSection(AllFilterYears,o,$("#FilterYears"),"Year")}function redrawFilterSection(e,t,a,r){MergeOldAndNewFilters(e,t);var o=GetFilterHtml(e,0,r,!0,null);$(a).html(o),$(a).find("[id*="+r+"_]").each(function(){$(this).change(function(){if(!DontTriggerChangeForYearRange){var e=$(this).attr("id"),t=e.replace("Type_","").replace("Publisher_","").replace("Journal_","").replace("Category_","").replace("Year_","").replace(/___SPACE___/gi," "),a="0"==e.indexOf("Type_")?"Type":"0"==e.indexOf("Publisher_")?"Publisher":"0"==e.indexOf("Journal_")?"Journal":"0"==e.indexOf("Category_")?"Category":"Year",r=$(this).is(":checked"),o="Type"==a?AllFilterTypes:"Publisher"==a?AllFilterPublishers:"Journal"==a?AllFilterJournals:"Category"==a?AllFilterCategories:AllFilterYears;if(null==o[t])for(var i in o){for(var n in o[i].children)if(n==t){o=o[i].children;break}if(null!=o[t])break}o[t].selected=r;var s=$(this).parent().attr("data-yearRange");if(null!=s){var l=0;$("[data-yearRange="+s+"]").each(function(){$(this).find("input[type=checkbox]").is(":checked")&&l++}),0==l&&$("#Year_"+s.replace("-","___SPACE___-___SPACE___")).is(":checked")&&(DontTriggerChangeForYearRange=!0,$("#Year_"+s.replace("-","___SPACE___-___SPACE___")).prop("checked",!1).change(),DontTriggerChangeForYearRange=!1)}"Year"==a&&(PreventResourceBinding++,$("[data-yearRange="+t.replace(/ /gi,"")+"]").each(function(){$(this).find("input[type=checkbox]").prop("checked",r).change(),r?$(this).show():$(this).hide()}),PreventResourceBinding--),0==PreventResourceBinding&&UserChangedBinding({FilterTypes:ConvertFilterTypes(AllFilterTypes,!0),FilterPublishers:ConvertFilterPublishers(AllFilterPublishers,!0),FilterJournals:ConvertFilterJournals(AllFilterJournals,!0),FilterCategories:ConvertFilterCategories(AllFilterCategories,!0),FilterYears:ConvertFilterYears(AllFilterYears,!0),From:1},!0)}})})}function MergeOldAndNewFilters(e,t){for(var a in e)null!=t[a]?(e[a].disabled=!1,e[a].title=t[a].title,e[a].count=t[a].count,null!=e[a].children&&MergeOldAndNewFilters(e[a].children,t[a].children)):e[a].disabled=!0;for(var a in t)null==e[a]&&(e[a]=t[a])}function SortHash(e){var t=[];for(var a in e)t[t.length]={key:a,obj:e[a]};for(var r=t.sort(function(e,t){var a="before 1900"==e.key?-1e3:"before 1900"==t.key?1e3:e.key>t.key?1:-1;return a}),o={},i=0;i<r.length;i++)o[r[i].key]=r[i].obj;return o}function GetFilterHtml(e,t,a,r,o){var i="",n=[];for(var s in e)n[n.length]={key:s,obj:e[s]};for(var l=n.sort(function(e,t){var a="before 1900"==e.key?-1e3:"before 1900"==t.key?1e3:e.key>t.key?1:-1;return a}),d=0;d<l.length;d++){s=l[d].key;if(!e[s].disabled){var c=a+"_"+s.replace(/ /gi,"___SPACE___"),u="Type"==a?"background-color:"+TypesColors[e[s].title]+"; color:"+getForegroundColor(TypesColors[e[s].title]):"",h=null==e[s].children?"":GetFilterHtml(e[s].children,t+1,a,e[s].selected,s.replace(/ /gi,""));i+='<div style="position:relative; left:'+10*t+"px; "+(r?"":"display:none;")+'" class="custom-control custom-checkbox mb-1" '+(null==o?"":'data-yearRange="'+o+'"')+' >    <input type="checkbox" class="custom-control-input" '+(e[s].selected?"checked":"")+' id="'+c+'">    <label style="width:calc(100% - 63px); font-size:90%;" class="custom-control-label" for="'+c+'">'+e[s].title+'</label>    <span style="position:absolute; top:2px; right:'+20*t+"px;  font-weight:normal; min-width:60px; padding: 3px 6px 5px 6px;"+u+'" class="badge badge-pill badge-info">'+e[s].count+"</span></div>"+h}}return i}function FindPublisherClear(){$("#FindPublisher_Input").val(""),FindPublisherSearch()}function FindPublisherSearch(e){var t=!1;null!=e&&13==e.which&&(t=!0);var a=$("#FindPublisher_Input").val().trim().toLowerCase();if(FindPublisherLastSearched!=a){if(FindPublisherLastSearched=a,FindPublisherFoundResult=[],""!=a)for(var r in AllFilterPublishers)AllFilterPublishers[r].disabled||-1==AllFilterPublishers[r].title.trim().toLowerCase().indexOf(a)||(FindPublisherFoundResult[FindPublisherFoundResult.length]=r);FindPublisherShowingIndex=-1,FindPublisherNext()}else t&&FindPublisherNext()}function FindPublisherNext(){FindPublisherShowingIndex++,FindPublisherShowingIndex==FindPublisherFoundResult.length&&(FindPublisherShowingIndex=0),FindPublisherShow()}function FindPublisherPrev(){FindPublisherShowingIndex--,-1==FindPublisherShowingIndex&&(FindPublisherShowingIndex=FindPublisherFoundResult.length-1),FindPublisherShow()}function FindPublisherShow(){if($("#FilterPublishers mark").each(function(){$(this).replaceWith($(this).html())}),0!=FindPublisherFoundResult.length){var e,t=FindPublisherFoundResult[FindPublisherShowingIndex],a=AllFilterPublishers[t].title
;$("#FilterPublishers > div > label").each(function(){$(this).attr("for")=="Publisher_"+t&&(e=$(this))}),$(e).html(_markWordsInString(a,[{Key:$("#FindPublisher_Input").val().trim(),Value:$("#FindPublisher_Input").val().trim()}],!1)),$("#FilterPublishers").scrollTop(0);var r=$("#FilterPublishers").offset().top+$("#FilterPublishers").height()/2,o=$("#FilterPublishers mark").offset().top;$("#FilterPublishers").scrollTop(o-r)}$("#FindPublisher_Count").html((0==FindPublisherFoundResult.length?0:FindPublisherShowingIndex+1)+"/"+FindPublisherFoundResult.length),$("#FindPublisher_Input").css("padding-right",$("#FindPublisher_Count").width()+57+"px")}function FindJournalClear(){$("#FindJournal_Input").val(""),FindJournalSearch()}function FindJournalSearch(e){var t=!1;null!=e&&13==e.which&&(t=!0);var a=$("#FindJournal_Input").val().trim().toLowerCase();if(FindJournalLastSearched!=a){if(FindJournalLastSearched=a,FindJournalFoundResult=[],""!=a)for(var r in AllFilterJournals)AllFilterJournals[r].disabled||-1==AllFilterJournals[r].title.trim().toLowerCase().indexOf(a)||(FindJournalFoundResult[FindJournalFoundResult.length]=r);FindJournalShowingIndex=-1,FindJournalNext()}else t&&FindJournalNext()}function FindJournalNext(){FindJournalShowingIndex++,FindJournalShowingIndex==FindJournalFoundResult.length&&(FindJournalShowingIndex=0),FindJournalShow()}function FindJournalPrev(){FindJournalShowingIndex--,-1==FindJournalShowingIndex&&(FindJournalShowingIndex=FindJournalFoundResult.length-1),FindJournalShow()}function FindJournalShow(){if($("#FilterJournals mark").each(function(){$(this).replaceWith($(this).html())}),0!=FindJournalFoundResult.length){var e,t=FindJournalFoundResult[FindJournalShowingIndex],a=AllFilterJournals[t].title;$("#FilterJournals > div > label").each(function(){$(this).attr("for")=="Journal_"+t&&(e=$(this))}),$(e).html(_markWordsInString(a,[{Key:$("#FindJournal_Input").val().trim(),Value:$("#FindJournal_Input").val().trim()}],!1)),$("#FilterJournals").scrollTop(0);var r=$("#FilterJournals").offset().top+$("#FilterJournals").height()/2,o=$("#FilterJournals mark").offset().top;$("#FilterJournals").scrollTop(o-r)}$("#FindJournal_Count").html((0==FindJournalFoundResult.length?0:FindJournalShowingIndex+1)+"/"+FindJournalFoundResult.length),$("#FindJournal_Input").css("padding-right",$("#FindJournal_Count").width()+57+"px")}function StarsHtml(e){for(var t="",a=0;a<5;a++)t+='<i class="fa fa-star"></i>';var r='<div style="position:relative; width:70px; height:25px; float:right;">    <div style="position:absolute; top:0px; left:0px; color:#aaa;" >'+t+'    </div>    <div style="position:absolute; top:0px; left:0px; overflow:hidden; width:'+66.9*e/5+'px;" class="text-warning">        <div style="white-space:nowrap;">'+t+"        </div>    </div></div>";return r}function HighlightSearchWords(e,t){$(null==e||null==e?$("#ResourcesContainer > .list-group-item[data-index="+t+"]"):$(e)).each(function(){$(this).find("mark").each(function(){$(this).replaceWith($(this).html())}),$(this).find(".markable").each(function(){$(this).html(markWordsInString($(this).html()))})})}function markWordsInString(e){return _markWordsInString(e,qWords,!0)}function _markWordsInString(e,t,a){if(null!=t){for(var r=[e],o=0;o<t.length;o++)for(var i=t[o],n=(i.Key,i.Value),s=0;s<r.length;)if(0!=r[s].indexOf("<mark>")){var l=("startOfReplacingString"+MyReplaceForMark(r[s],n,a)+"endOfReplacingString").split("<mark>");r.splice(s,1);for(var d=0;d<l.length;d++){var c=l[d].replace("startOfReplacingString","").replace("endOfReplacingString","");d%2==1&&(c="<mark>"+c+"</mark>"),r.splice(s,0,c),s++}}else s++;var u="";for(o=0;o<r.length;o++)u+=r[o];return u}return e}function GoToPage(e){if(!$(e).hasClass("disabled")){var t="Paging_First"==$(e).attr("id")?1:"Paging_Last"==$(e).attr("id")?resourcesPaginationData.totalPages:"Paging_Previouse"==$(e).attr("id")?resourcesPaginationData.currentPage-1:"Paging_Next"==$(e).attr("id")?resourcesPaginationData.currentPage+1:$(e).attr("data-page");t!=resourcesPaginationData.currentPage&&UserChangedBinding({From:(t-1)*CurrentState.PerPage+1})}return!1}function resourcesPaginationDraw(){$("#resourcesPagination #Paging_Last").html(resourcesPaginationData.totalPages),1==resourcesPaginationData.currentPage?$("#resourcesPagination #Paging_Previouse").addClass("disabled"):$("#resourcesPagination #Paging_Previouse").removeClass("disabled"),resourcesPaginationData.currentPage<=5?$("#resourcesPagination #Paging_First").hide():$("#resourcesPagination #Paging_First").show(),resourcesPaginationData.currentPage==resourcesPaginationData.totalPages?$("#resourcesPagination #Paging_Next").addClass("disabled"):$("#resourcesPagination #Paging_Next").removeClass("disabled"),Math.ceil(resourcesPaginationData.currentPage/5)==Math.ceil(resourcesPaginationData.totalPages/5)?$("#resourcesPagination #Paging_Last").hide():$("#resourcesPagination #Paging_Last").show();var e=5*Math.floor((resourcesPaginationData.currentPage-1)/5)+1,t=e+4;t>resourcesPaginationData.totalPages&&(t=resourcesPaginationData.totalPages);for(var a=1;a<=5;a++){var r=$("#resourcesPagination #Paging_Page"+a),o=a+e-1;o>resourcesPaginationData.totalPages?$(r).hide():($(r).show(),$(r).attr("data-page",o).html(o),o==resourcesPaginationData.currentPage?$(r).removeClass("btn-outline-info").addClass("btn-info"):$(r).removeClass("btn-info").addClass("btn-outline-info"))}1==e?$("#resourcesPagination #Paging_NotStartOfPaging").hide():$("#resourcesPagination #Paging_NotStartOfPaging").show(),t==resourcesPaginationData.totalPages?$("#resourcesPagination #Paging_NotEndOfPaging").hide():$("#resourcesPagination #Paging_NotEndOfPaging").show()}function TruncateSection(e,t,a,r,o,i){null!=e&&null!=e||(e="#ResourcesContainer"),$(e+" [data-index="+i+"] ."+t).each(function(){var e=decodeURI($(this).attr(a)),t=e.split(" "),i=$(this).parent().height(),n=$(this).parent().children(),s=$(n[n.length-1]).offset().top+$(n[n.length-1]).height()-$(this).parent().offset().top,l=i-s,d="",c="";$(this).html("");for(var u=$(this).height(),h=0,p=-1,g=0;g<t.length;g++){var m=d+(""==d?"":" ")+t[g];if($(this).html(m),$(this).height()>u+2&&(h=$(this).height()-u,u=$(this).height(),p++),$(this).height()>l+.6*h&&p>=o){var f=$(this).height()-2,b=m;for($(this).removeClass("markable").attr(a+"-short",encodeURI(b)).html('<span class="markable">'+b+" ... </span>"+(r?'<a href="#" onclick="ResourceDescriptionToggle($(this)); return false;" style="text-decoration:none; color:#17a2b8; padding: 2px 10px;">'+Resource.more+" »</a>":""));$(this).height()>=f;)b=b.substr(0,b.lastIndexOf(" ")),$(this).removeClass("markable").attr(a+"-short",encodeURI(b)).html('<span class="markable">'+b+" ... </span>"+(r?'<a href="#" onclick="ResourceDescriptionToggle($(this)); return false;" style="text-decoration:none; color:#17a2b8; padding: 2px 10px;">'+Resource.more+" »</a>":""));break}c=d,d=m}var S=0;for(u=$(this).height();$(this).height()>l+.6*h&&p>o&&(S++,!(S>=100));){var w=c,y=w.split(" "),v=y[y.length-1];w=(w+"!!!EndOfExpr!!!").replace(" "+v+"!!!EndOfExpr!!!","").replace("!!!EndOfExpr!!!",""),$(this).attr(a+"-short",encodeURI(w)).html('<span class="markable">'+w+" ... </span>"+(r?'<a href="#" onclick="ResourceDescriptionToggle($(this)); return false;" style="text-decoration:none; color:#17a2b8; padding: 2px 10px;">'+Resource.more+" »</a>":"")),c=w,u-$(this).height()>5&&(u=$(this).height(),p--)}})}function ShowAuthors(e){$("#ResourcesContainer [data-index="+e+"] [data-searchedAuthors]").each(function(){var e=$(this).html(),t=decodeURI($(this).attr("data-searchedAuthors")),a=e.replace(/,/gi," ").replace(/;/gi," ").replace(/  /gi," ").replace(/  /gi," ").replace(/  /gi," ").split(" "),r=t.replace(/,/gi,", ").replace(/;/gi,", ").replace(/  /gi," ").replace(/  /gi," ").replace(/  /gi," ").split(" ");$(this).html("&nbsp;");var o=$(this).height();if($(this).html(""==e?"&nbsp;":e),$(this).height()>1.1*o){for(var i=[],n=0;n<a.length;n++)i[n]={Word:a[n],Index:n,Point:1e3};for(var s=0;s<r.length;s++)for(n=0;n<a.length;n++)if(r[s]==i[n].Word){i[n].Point+=1e6,0!=n&&(i[n-1].Point+=1e3),n!=i.length-1&&(i[n+1].Point+=1e3);for(var l=0;l<i.length;l++)i[l].Point-=Math.abs(l-n)*Math.abs(l-n)}for(i=i.sort(function(e,t){return e.Point!=t.Point?e.Point-t.Point:t.Index-e.Index});$(this).height()>1.1*o;){var d=i.splice(0,1);a[d[0].Index]=null;var c="";for(n=0;n<a.length;n++)null!=a[n]?c+=" "+a[n]:c+="DOTDOTDOT";c=c.replace(/DOTDOTDOTDOTDOTDOT/gi,"DOTDOTDOT").replace(/DOTDOTDOTDOTDOTDOT/gi,"DOTDOTDOT").replace(/DOTDOTDOTDOTDOTDOT/gi,"DOTDOTDOT").replace(/DOTDOTDOTDOTDOTDOT/gi,"DOTDOTDOT").replace(/DOTDOTDOTDOTDOTDOT/gi,"DOTDOTDOT").replace(/DOTDOTDOT/gi," ... "),$(this).html(c)}}})}function ResourceDescriptionToggle(e){ResourceDescriptionToggleJustClicked=!0,setTimeout(function(){ResourceDescriptionToggleJustClicked=!1},100),$(e).hasClass("expanded")?($(e).removeClass("expanded"),$(e).parent().find("span").html(decodeURI($(e).parent().attr("data-description-short"))+" ... "),$(e).html(Resource.more+" »")):($(e).addClass("expanded"),$(e).parent().find("span").html(decodeURI($(e).parent().attr("data-description"))),$(e).html("« "+Resource.less)),HighlightSearchWords($(e).parent().parent().parent()),MathJax.Hub.Typeset()}function MyReplaceForMark(e,t,a){if(t=t.toLowerCase(),t.length>3||!a){for(var r="",o=-1,i=-1;-1!=e.toLowerCase().indexOf(t);){o=e.toLowerCase().indexOf(t),i=o+t.length;var n=e.substring(0,o),s="<mark>"+e.substring(o,o+t.length)+"<mark>";r=r+n+s,e=e.substring(i)}return r+e}var l="",d=e.split(" ");for(o=0;o<d.length;o++)d[o].toLowerCase()==t&&(d[o]="<mark>"+d[o]+"<mark>"),l+=d[o]+" ";return l}function stripHtml(e){var t=(new DOMParser).parseFromString(e,"text/html");return t.body.textContent||""}function checkURLState(){if(!(PreventResourceBinding>0)){checkingURLState=!0;for(var e="",t="",a="",r="",o="",i="",n="",s="Title",l=10,d=1,c="",u="",h="",p="",g="",m=window.location.search.substring(1).split("&"),f=0;f<m.length;f++){var b=m[f].split("=")[0],S=m[f].split("=")[1];switch(b.toLowerCase()){case"q".toLowerCase():e=S;break;case"Title".toLowerCase():t=S;break;case"Author".toLowerCase():a=S;break;case"Description".toLowerCase():r=S;break;case"Keywords".toLowerCase():o=S;break;case"ISBN".toLowerCase():i=S;break;case"DOI".toLowerCase():n=S;break;case"Sort".toLowerCase():s=S;break;case"PerPage".toLowerCase():l=Number(S);break;case"Page".toLowerCase():d=Number(S);break;case"Types".toLowerCase():c=S;break;case"Publishers".toLowerCase():u=S;break;case"Journals".toLowerCase():h=S;break;case"Categories".toLowerCase():p=S;break;case"Years".toLowerCase():g=S}}AllFilterTypes=ConvertFilterTypes(c),AllFilterPublishers=ConvertFilterPublishers(u),AllFilterJournals=ConvertFilterJournals(h),AllFilterCategories=ConvertFilterCategories(p),AllFilterYears=ConvertFilterYears(g),IsMobile?($("#SortByModal .list-group-item.list-group-item-success").removeClass("list-group-item-success"),$("#SortByModal .list-group-item[data-sortByValue="+s+"]").addClass("list-group-item-success"),$("#PerPageModal .list-group-item.list-group-item-success").removeClass("list-group-item-success"),$("#PerPageModal .list-group-item[data-perPageValue="+l+"]").addClass("list-group-item-success")):($("#sortBy").val(s),$("#perPage").val("PerPage"+l)),$("#HeaderSearchInput").val(decodeURIComponent(e)),$("#HeaderSearchInput_Title").val(decodeURIComponent(t)),$("#HeaderSearchInput_Author").val(decodeURIComponent(a)),$("#HeaderSearchInput_Description").val(decodeURIComponent(r)),$("#HeaderSearchInput_Keywords").val(decodeURIComponent(o)),$("#HeaderSearchInput_ISBN").val(decodeURIComponent(i)),$("#HeaderSearchInput_DOI").val(decodeURIComponent(n)),$("#HeaderSearchInput_Publisher").val(null).trigger("change"),$.post("../../Home/GetPublishersFromIdsString",{Ids:u},function(e){for(var t=[],a=0;a<e.length;a++){if(0==$("#HeaderSearchInput_Publisher > option[value="+e[a].id+"]").length){var r=new Option(e[a].text,e[a].id,!0,!0);$("#HeaderSearchInput_Publisher").append(r).trigger("change")}t[t.length]=e[a].id}$("#HeaderSearchInput_Publisher").val(t),$("#HeaderSearchInput_Publisher").trigger("change")},"json"),$("#HeaderSearchInput_JournalName").val(null).trigger("change"),$.post("../../Home/GetJournalsFromIdsString",{Ids:h},function(e){for(var t=[],a=0;a<e.length;a++){if(0==$("#HeaderSearchInput_JournalName > option[value="+e[a].id+"]").length){var r=new Option(e[a].text,e[a].id,!0,!0);$("#HeaderSearchInput_JournalName").append(r).trigger("change")}t[t.length]=e[a].id}$("#HeaderSearchInput_JournalName").val(t),$("#HeaderSearchInput_JournalName").trigger("change")},"json"),CurrentState={SearchQuery:e,SearchTitle:t,SearchAuthor:a,SearchDescription:r,SearchKeywords:o,SearchISBN:i,SearchDOI:n,SortBy:s,PerPage:l,From:(d-1)*l+1,FilterTypes:c,FilterPublishers:u,FilterJournals:h,FilterCategories:p,FilterYears:g},""==e&&""==t&&""==r&&""==a&&""==o&&""==i&&""==n?IsMobile?($("#SortByModal .list-group-item[data-sortByValue=Relevancy]").hide(),"Relevancy"==CurrentState.SortBy&&(CurrentState.SortBy="Year",history.replaceState(CurrentState,"",GetURLFromState(CurrentState)),$("#SortByModal .list-group-item.list-group-item-success").removeClass("list-group-item-success"),$("#SortByModal .list-group-item[data-sortByValue="+CurrentState.SortBy+"]").addClass("list-group-item-success"))):($($("#sortBy option")[0]).hide(),"Relevancy"==CurrentState.SortBy&&(CurrentState.SortBy="Year",history.replaceState(CurrentState,"",GetURLFromState(CurrentState)),$("#sortBy").val(CurrentState.SortBy))):IsMobile?$("#SortByModal .list-group-item[data-sortByValue=Relevancy]").show():$($("#sortBy option")[0]).show(),checkingURLState=!1,Search()}}function ConvertFilterTypes(e,t){if(t){var a="";for(var r in e)e[r].selected&&(a+=r);return a}a={};for(var o=0;o<e.length;o+=2){var i=e[o]+e[o+1];a[i]={count:0,children:{},disabled:!1,selected:!0}}return a}function ConvertFilterPublishers(e,t){if(t){var a="";for(var r in e)e[r].selected&&(a+=r);return a}a={};for(var o=0;o<e.length;o+=3){var i=e[o]+e[o+1]+e[o+2];a[i]={count:0,children:{},disabled:!1,selected:!0}}return a}function ConvertFilterJournals(e,t){if(t){var a="";for(var r in e)e[r].selected&&(a+=r);return a}a={};for(var o=0;o<e.length;o+=3){var i=e[o]+e[o+1]+e[o+2];a[i]={count:0,children:{},disabled:!1,selected:!0}}return a}function ConvertFilterCategories(e,t){if(t){var a="";for(var r in e)e[r].selected&&(a+=r);return a}a={};for(var o=0;o<e.length;o++){var i=e[o];a[i]={count:0,children:{},disabled:!1,selected:!0}}return a}function ConvertFilterYears(e,t){if(t){var a="";for(var r in e)for(var o in e[r].children)e[r].children[o].selected&&(a+=o);return a}a={};InitialSelectedSingleYears={};for(var i=0;i<e.length;i+=4){var n=Number(e[i]+e[i+1]+e[i+2]+e[i+3]);YearRange=null;for(var s=0;s<YearRanges.length;s++)if(YearRanges[s].From<=n&&n<=YearRanges[s].To){YearRange=YearRanges[s];break}null==a[YearRange.Label]&&(a[YearRange.Label]={count:0,children:{},disabled:!1,selected:!0}),resultRange=a[YearRange.Label],resultRange.children[n+""]={count:0,children:{},disabled:!1,selected:!0}}return a}function UserChangedBinding(e,t){var a=JSON.parse(JSON.stringify(CurrentState));for(var r in e)a[r]=e[r];var o=GetURLFromState(a);if(o!=window.location.search)if(history.pushState(a,"",o),t){var i=Math.floor(1e9*Math.random());LastFilterChangeId=i,setTimeout(function(){i==LastFilterChangeId&&(checkURLState(),IsMobile&&$("#FilterModal").modal("hide"))},1500)}else checkURLState()}function ToggleMobileSearchSection(){$("#MobileSearchSection").is(":visible")?($("#MobileSearchSection").fadeOut(),$("#HeaderSearchToggleButton i").removeClass("fa-eye-slash").addClass("fa-search")):($("#MobileSearchSection").fadeIn(),$("#HeaderSearchToggleButton i").removeClass("fa-search").addClass("fa-eye-slash"))}function ResetFilters(){UserChangedBinding({FilterTypes:"",FilterPublishers:"",FilterJournals:"",FilterCategories:"",FilterYears:""}),IsMobile&&$("#FilterModal").modal("hide")}function GetURLFromState(e){var t="";""!=e.SearchQuery&&(t+=(""==t?"?":"&")+"q="+e.SearchQuery),""!=e.SearchTitle&&(t+=(""==t?"?":"&")+"Title="+e.SearchTitle),""!=e.SearchAuthor&&(t+=(""==t?"?":"&")+"Author="+e.SearchAuthor),""!=e.SearchDescription&&(t+=(""==t?"?":"&")+"Description="+e.SearchDescription),""!=e.SearchKeywords&&(t+=(""==t?"?":"&")+"Keywords="+e.SearchKeywords),""!=e.SearchISBN&&(t+=(""==t?"?":"&")+"ISBN="+e.SearchISBN),""!=e.SearchDOI&&(t+=(""==t?"?":"&")+"DOI="+e.SearchDOI);var a=(e.From-1)/e.PerPage+1;return t+=(""==t?"?":"&")+"Sort="+e.SortBy,t+=(""==t?"?":"&")+"PerPage="+e.PerPage,t+=(""==t?"?":"&")+"Page="+a,""!=e.FilterTypes&&(t+=(""==t?"?":"&")+"Types="+e.FilterTypes),""!=e.FilterPublishers&&(t+=(""==t?"?":"&")+"Publishers="+e.FilterPublishers),""!=e.FilterJournals&&(t+=(""==t?"?":"&")+"Journals="+e.FilterJournals),""!=e.FilterCategories&&(t+=(""==t?"?":"&")+"Categories="+e.FilterCategories),""!=e.FilterYears&&(t+=(""==t?"?":"&")+"Years="+e.FilterYears),t}function Search(e){var t=function(e){PreviouseSearchDrawWidth=$(window).width(),$("#leftFilterSection").show(),IsMobile||$("#rightSearchResultsSection").removeClass("col-lg-12").addClass("col-lg-9"),qWords=e.SearchedWordsAndRoots,0==e.TotalCount?($("#SortBySection").hide(),$("#resourcesPagination").hide(),$("#ResourcesContainer").html('<div class="alert alert-danger" style="'+("fa"==SiteLang?"direction:rtl; text-align:right;":"")+'" >'+Resource["Your search did not match any results"]+".</div>"),$("#SortBySection").show(),$("#SearchResultCount").html(e.SearchResultCount),$("#SearchResultDuration").html(e.SearchResultDuration),WaitingToggle(!1)):($("#SortBySection").show(),$("#resourcesPagination").show(),$("#SearchResultCount").html(e.SearchResultCount),$("#SearchResultDuration").html(e.SearchResultDuration),resourcesPaginationData.totalPages=Math.ceil(1*e.TotalCount/CurrentState.PerPage),CurrentState.From!=e.From&&(CurrentState.From=e.From,history.replaceState(CurrentState,"",GetURLFromState(CurrentState))),resourcesPaginationData.currentPage=(CurrentState.From-1)/CurrentState.PerPage+1,resourcesDraw(e.Resources,0,function(){WaitingToggle(!1)}),resourcesPaginationDraw(),windowScroll()),resourcesFilterDraw(e.AllFilterTypes,e.AllFilterPublishers,e.AllFilterJournals,e.AllFilterCategories,e.AllFilterYears),document.title=e.PageTitle,$("meta[name=description]").remove(),$("head").append('<meta name="description" content="'+e.PageDescription+'">'),$("meta[name=keywords]").remove(),$("head").append('<meta name="keywords" content="'+e.PageKeywords+'">')};e?PreviouseSearchDrawWidth!=$(window).width()&&(WaitingToggle(!0),t(LastSearchReturnData)):(WaitingToggle(!0),$.post("../../Search/Search",CurrentState,function(e){LastSearchReturnData=e,t(e)},"json"))}function WaitingToggle(e){e?$("#WaitingDIV").show():$("#WaitingDIV").hide()}function ShowErrorModal(e,t,a){$("#ErrorModal #ErrorModalTitle").html(e),$("#ErrorModal #ErrorModalText").html(t),$("#ErrorModal .ExtraButton").remove(),null!=a&&null!=a&&$("#ErrorModal .modal-footer button").before(a),$("#ErrorModal").modal("show")}function ShowSuccessModal(e,t){$("#SuccessModal #SuccessModalTitle").html(e),$("#SuccessModal #SuccessModalText").html(t),$("#SuccessModal").modal("show")}function ShowConfirmModal(e,t,a){$("#ConfirmModal #ConfirmModalTitle").html(e),$("#ConfirmModal #ConfirmModalText").html(t),ShowConfirmModalOnOK=a,$("#ConfirmModal").modal("show")}function GetWindowLocationSearchParameters(){for(var e={},t=window.location.search.substring(1).split("&"),a=0;a<t.length;a++){var r=t[a].split("=");e[r[0]]=1==r.length?"":r[1]}return e}function CheckTopOfPageButtonVisibility(){"/Search"!=window.location.pathname&&"/Journals"!=window.location.pathname&&"/Publishers"!=window.location.pathname||($(window).scrollTop()<2?$("#TopOfPageButton").hide():$("#TopOfPageButton").show(),$(window).scrollTop()-$(document).height()+$(window).height()>-2?$("#BottomOfPageButton").hide():$("#BottomOfPageButton").show())}function ContentTypeResourceCountTo(e,t,a,r){var o=Math.pow(a,2)/r;$(e).html(Math.floor(t*o/r).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+" #"),a<r&&setTimeout(function(){ContentTypeResourceCountTo(e,t,a+1,r)},70)}function windowScroll(){var e=Math.max(6,$(document).height()-$(window).height()-$(".PageFooter").height()-20);$("#accordion").css("top",Math.min($(window).scrollTop()+6,e)+"px")}function SetPerPageForMobile(e,t){$(t).parent().find(".list-group-item.list-group-item-success").removeClass("list-group-item-success"),$(t).addClass("list-group-item-success"),setTimeout(function(){$("#PerPageModal").modal("hide"),UserChangedBinding({From:1,PerPage:e})},200)}function SetSortByForMobile(e,t){$(t).parent().find(".list-group-item.list-group-item-success").removeClass("list-group-item-success"),$(t).addClass("list-group-item-success"),setTimeout(function(){$("#SortByModal").modal("hide"),UserChangedBinding({From:1,SortBy:e})},200)}function SetAdvancedSearchPublishersAutocomplete(){var e="";try{$("#HeaderSearchInput_JournalName").find(":selected").each(function(){JournalId=$(this).attr("value"),e+=JournalId})}catch(e){}$("#HeaderSearchInput_Publisher").unbind(),$("#HeaderSearchInput_Publisher").select2({closeOnSelect:!1,placeholder:$("#HeaderSearchInput_Publisher").attr("data-placeholder"),ajax:{url:"../../Home/SearchPublishers?SelectedJournals="+e,dataType:"json",processResults:function(e){return{results:e}}}}),$("#HeaderSearchInput_Publisher").on("change",function(e){SetAdvancedSearchJournalsAutocomplete(),DontToggle=!0,setTimeout(function(){DontToggle=!1},200),$("#HeaderSearchInput_Publisher").parent().find(".input-group-text:not(.btn)").css("background-color",0==$("#HeaderSearchInput_Publisher").find(":selected").length?"rgb(220, 222, 226)":"rgb(246, 254, 121)")}),$("#HeaderSearchInput_Publisher").parent().find(".select2.select2-container").css("width","fa"==SiteLang?"calc(100% - 120px)":"calc(100% - 142px)"),$("#HeaderSearchInput_Publisher").parent().find(".select2-selection.select2-selection--multiple").css("border","1px solid #ced4da").css("border-radius","0").css("font-size","90%").css("min-height","calc(2rem + 2px)"),$("#HeaderSearchInput_Publisher").parent().find("input").css("font-weight","bold")}function SetAdvancedSearchJournalsAutocomplete(){var e="";try{$("#HeaderSearchInput_Publisher").find(":selected").each(function(){PublisherId=$(this).attr("value"),e+=PublisherId})}catch(e){}$("#HeaderSearchInput_JournalName").unbind(),$("#HeaderSearchInput_JournalName").select2({closeOnSelect:!1,placeholder:$("#HeaderSearchInput_JournalName").attr("data-placeholder"),ajax:{url:"../../Home/SearchJournals?SelectedPublishers="+e,dataType:"json",processResults:function(e){return{results:e}}}}),$("#HeaderSearchInput_JournalName").on("change",function(e){SetAdvancedSearchPublishersAutocomplete(),DontToggle=!0,setTimeout(function(){DontToggle=!1},200),$("#HeaderSearchInput_JournalName").parent().find(".input-group-text:not(.btn)").css("background-color",0==$("#HeaderSearchInput_JournalName").find(":selected").length?"rgb(220, 222, 226)":"rgb(246, 254, 121)")}),$("#HeaderSearchInput_JournalName").parent().find(".select2.select2-container").css("width","fa"==SiteLang?"calc(100% - 120px)":"calc(100% - 142px)"),$("#HeaderSearchInput_JournalName").parent().find(".select2-selection.select2-selection--multiple").css("border","1px solid #ced4da").css("border-radius","0").css("font-size","90%").css("min-height","calc(2rem + 2px)"),$("#HeaderSearchInput_JournalName").parent().find("input").css("font-weight","bold")}function LoadBasketItems(){WaitingToggle(!0),$.post("../../Search/Search",{CartItems:!0},function(e){WaitingToggle(!1),0==e.Resources.length?($("#ResourcesContainer").html('<div class="alert alert-danger" style="'+("fa"==SiteLang?"direction:rtl; text-align:center;":"")+'">'+Resource["There's not any resources in your cart."]+"</div>"),$("#TotalPrice").html(ReplaceLatinDigits("0".replace(/\B(?=(\d{3})+(?!\d))/g,","))),$("#ResourcesContainer").removeClass("col-lg-8").addClass("col-12"),$("#PaymentSection").hide()):($("#ResourcesContainer").removeClass("col-12").addClass("col-lg-8"),$("#PaymentSection").show(),resourcesDraw(e.Resources,0,function(){for(var t=0,a=0;a<e.Resources.length;a++)t+=e.Resources[a].Price;$("#PurchaseSection").show(),$("#EmptyCartSection").show(),$.post("../../Home/GetUserCredit",{},function(e){CartFormTotalPrice=t,CartFormCredit=e.Data.Credit,RefreshCartFormPrices()})}))},"json")}function ToggleHistoryDetailRow(e,t){$(e).hasClass("ExpandButton")?($(".CollapseButton:visible").click(),$(e).hide(),$(e).parent().children(".CollapseButton").show()):($(e).hide(),$(e).parent().children(".ExpandButton").show()),$(t).slideToggle()}function ToggleAdvancedSearch(e){if(!DontToggle||SearchButtonWasJustClicked){if(AdvancedSearchJustToggled=!0,setTimeout(function(){AdvancedSearchJustToggled=!1},50),e&&!AdvancedSearchShowing)return;$(window).width();AdvancedSearchShowing=!AdvancedSearchShowing,AdvancedSearchShowing?($("#HeaderSearchAdvancedButton").css("width","fa"==SiteLang?"89px":"111px"),$("#AdvancedSearchPanel").css("max-height","400px"),setTimeout(function(){$("#HeaderSearchAdvancedButton").css("transition-delay","0.2s"),$("#HeaderSearchInput").css("transition-delay","0.2s"),$("#AdvancedSearchPanel").css("transition-delay","0s")},400),setTimeout(function(){$("#AdvancedSearchPanel").css("padding","5px").css("visibility","visible"),$("#HeaderSearchButton").css("border-bottom-"+(SiteRTL?"left":"right")+"-radius","0rem"),$("#HeaderSearchAdvancedButton").css("border-bottom-"+(SiteRTL?"right":"left")+"-radius","0rem")},200)):($("#HeaderSearchAdvancedButton").css("width","40px"),$("#AdvancedSearchPanel").css("max-height","0px"),setTimeout(function(){$("#HeaderSearchAdvancedButton").css("transition-delay","0s"),$("#HeaderSearchInput").css("transition-delay","0s"),$("#AdvancedSearchPanel").css("transition-delay","0.2s")},400),setTimeout(function(){$("#AdvancedSearchPanel").css("visibility","hidden"),$("#HeaderSearchButton").css("border-bottom-"+(SiteRTL?"left":"right")+"-radius","0.25rem"),$("#HeaderSearchAdvancedButton").css("border-bottom-"+(SiteRTL?"right":"left")+"-radius","0.25rem"),$("#AdvancedSearchPanel").css("padding","0px")},200))}}function SearchButtonClicked(){var e=$("#HeaderSearchInput").val(),t=$("#HeaderSearchInput_Title").val(),a=$("#HeaderSearchInput_Author").val(),r=$("#HeaderSearchInput_Description").val(),o=$("#HeaderSearchInput_Keywords").val(),i=$("#HeaderSearchInput_ISBN").val(),n=$("#HeaderSearchInput_DOI").val(),s="";$("#HeaderSearchInput_Publisher").find(":selected").each(function(){PublisherId=$(this).attr("value"),s+=PublisherId});var l="";$("#HeaderSearchInput_JournalName").find(":selected").each(function(){JournalId=$(this).attr("value"),l+=JournalId});var d=GetWindowLocationSearchParameters(),c=null==d.q?null:d.q,u=null==d.Title?null:d.Title,h=null==d.Author?null:d.Author,p=null==d.Description?null:d.Description,g=null==d.Keywords?null:d.Keywords,m=null==d.ISBN?null:d.ISBN,f=null==d.DOI?null:d.DOI,b=null==d.Publishers?null:d.Publishers,S=null==d.Journals?null:d.Journals;if(e!=c||t!=u||a!=h||r!=p||o!=g||i!=m||n!=f||s!=b||l!=S)if("/search"==window.location.pathname.toLowerCase())UserChangedBinding({SearchQuery:e,SearchTitle:t,SearchAuthor:a,SearchDescription:r,SearchKeywords:o,SearchISBN:i,SearchDOI:n,FilterPublishers:s,FilterJournals:l,SortBy:"Relevancy",From:1});else{d.q=e,d.Title=t,d.Author=a,d.Description=r,d.Keywords=o,d.ISBN=i,d.DOI=n,d.Publishers=s,d.Journals=l,d.Sort="Relevancy";var w="../../../Search";for(var y in d)w+=(-1==w.indexOf("?")?"?":"&")+y+"="+("Page"==y?"1":d[y]);window.location=w}$("#HeaderSearchInput").is(":focus")&&$("#HeaderSearchInput").focusout(),$("#HeaderSearchInput_Title").is(":focus")&&$("#HeaderSearchInput_Title").focusout(),$("#HeaderSearchInput_Author").is(":focus")&&$("#HeaderSearchInput_Author").focusout(),$("#HeaderSearchInput_Description").is(":focus")&&$("#HeaderSearchInput_Description").focusout(),$("#HeaderSearchInput_Keywords").is(":focus")&&$("#HeaderSearchInput_Keywords").focusout(),$("#HeaderSearchInput_ISBN").is(":focus")&&$("#HeaderSearchInput_ISBN").focusout(),$("#HeaderSearchInput_DOI").is(":focus")&&$("#HeaderSearchInput_DOI").focusout(),SearchButtonWasJustClicked=!0,setTimeout(function(){SearchButtonWasJustClicked=!1},200)}function ShowSampleFile(e,t){SampleFileCurrentType=t;var a=$(e).attr("href"),r="",o='style="background:#000; width:calc(97vw - 3vh); height:calc(97vh - 3vw); position:relative; top:calc(1.5vh + 1.5vw); left:calc(1.5vh + 1.5vw); border:1px #222 solid; border-radius:5px; "';r="pdf"==t?"<iframe "+o+' src="../../ViewerJS/web/viewer.html?fileName='+a+'" ></iframe>':"<video "+o+' controls autoplay>    <source src="'+a+'" type="video/mp4">    <source src="'+a.replace(".mp4",".ogg")+'" type="video/ogg">    Your browser does not support the video tag.</video>',$("body").append('<div id="SampleViewBoard" style="background:rgba(0, 0, 0, 0.7); width:100vw; height:100vh; z-index:1000000; display:block; position:fixed; top:0px; left:0px;">'+r+'<a href="#" style="position:absolute; top:calc(1vh + 1vw); right:calc(2vh + 2vw); color:#aaa; font-size:200%;" onclick="CloseSampleFile(); return false;" ><i class="fa fa-window-close" /></a><a href="#" class="btn btn-sm" style="font-size:200%; position:absolute; color:#aaa; top: calc(50vh - 20px); right: calc(1.5vh + 1.5vw - 5px);" onclick="NextSample(1); return false;" ><i class="fa fa-chevron-right" /></a><a href="#" class="btn btn-sm" style="font-size:200%; position:absolute; color:#aaa; top: calc(50vh - 20px); left: calc(1.5vh + 1.5vw - 5px);" onclick="NextSample(-1); return false;" ><i class="fa fa-chevron-left" /></a></div>'),CloseSampleFilePermission=!1,setTimeout(function(){CloseSampleFilePermission=!0},200)}function CloseSampleFile(){CloseSampleFilePermission&&$("#SampleViewBoard").remove()}function NextSample(e){var t=[];$("[id*=SampleFile_]").each(function(e,a){t[t.length]=$(a)});var a=SampleFileCurrentIndex+e;a%=t.length,CloseSampleFile(),ShowSampleFile(SampleFileCurrentType,a)}function RefundResource(e,t){ShowConfirmModal(Resource[" "],Resource["Are you sure you want to refund this file?"],function(){$.post("../../Account/RefundResource",{Id:t},function(e){e.Success?window.location.reload():ShowErrorModal(Resource.Error,e.Message)})})}function CreateDownloadLink(e,t,a){$.post("../../Account/CreateDownloadLink",{Id:t},function(t){if(t.Success)if(null==e)window.location.reload();else{(a?$(e).parent().parent().parent():$(e).parent().parent()).find(".RefundCell button").attr("disabled","disabled").attr("title",Resource["You've already downloaded this resource!"]),(a?$(e).parent().parent().parent():$(e).parent().parent()).find(".PasswordCell").html(t.Data.Password),(a?$(e).parent().parent().parent():$(e).parent().parent()).find(".RemainingTimeCell").html(t.Data.RemainingTime+"′"),(a?$(e).parent().parent().parent():$(e).parent().parent()).find(".FileSizeCell").html(t.Data.FileSize);for(var r="",o=1;o<=t.Data.FilePartsCount;o++)r+='<a href="../../Account/Download/?key='+t.Data.DownloadKey+"&filePart="+o+'" class="btn btn-sm btn-success" style="margin-bottom:5px; margin-top:5px; min-width:100px;" >'+(1==t.Data.FilePartsCount?Resource.Download:Resource.Part+" "+o)+"</a>";t.Data.HasCrackFile&&(r+='<a href="../../Account/Download/?key='+t.Data.DownloadKey+'&filePart=crack" class="btn btn-sm btn-success" style="margin-bottom:5px; margin-top:5px; min-width:100px;" >'+Resource.Crack+"</a>"),$(e).replaceWith(r)}else ShowErrorModal(Resource.Error,t.Message)})}function RefreshSelectedPackage(){var e=$("#ChargingCreditAmount").val().replace(/۰/gi,"0").replace(/۱/gi,"1").replace(/۲/gi,"2").replace(/۳/gi,"3").replace(/۴/gi,"4").replace(/۵/gi,"5").replace(/۶/gi,"6").replace(/۷/gi,"7").replace(/۸/gi,"8").replace(/۹/gi,"9").replace(/[^0-9.]/gi,"");""==e&&(e="0");for(var t=Number(e)*("fa"==SiteLang?1e3:1),a=null,r=0;r<Packages.length;r++)if(Packages[r].Credit<=t){a=Packages[r];break}
var o=null==a?0:a.DiscountPercent*t/100;o%("fa"==SiteLang?1e3:.01)!=0&&(o+=("fa"==SiteLang?1e3:.01)-o%("fa"==SiteLang?1e3:.01));var i=t-o;$("#SelectedCreditPackageDiscountAmount").html(ReplaceLatinDigits(("$"==Currency?o.toFixed(2).replace(".",'<span style="font-weight: bold; font-size: 120%; line-height: 20%; margin: 0px 3px;">.</span>'):o.toString()).replace(/\B(?=(\d{3})+(?!\d))/g,","))),$("#SelectedCreditPackageDiscountPercent").html(ReplaceLatinDigits((null==a?0:a.DiscountPercent).toString())),$("#FinalPrice").html(ReplaceLatinDigits("$"==Currency?i.toFixed(2).replace(".",'<span style="font-weight: bold; font-size: 120%; line-height: 20%; margin: 0px 3px;">.</span>'):i.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","))),$(".CreditChargePackage.Active").removeClass("Active"),$(".CreditChargePackage[data-packageId="+(null==a?null:a.Id)+"]").addClass("Active"),"fa"!=SiteLang?($("[id*=btnPayment]").each(function(){0==e||"true"==$(this).attr("data-disabled")?$(this).attr("disabled","disabled").removeClass("SelectedPaymentMethod"):$(this).removeAttr("disabled")}),0==e&&$("#FinalPaymentOKButton").attr("disabled","disabled")):0==e?$("#FinalPaymentOKButton").attr("disabled","disabled"):$("#FinalPaymentOKButton").removeAttr("disabled")}function GoForCreditCharge(){var e=$("#ChargingCreditAmount").val().replace(/۰/gi,"0").replace(/۱/gi,"1").replace(/۲/gi,"2").replace(/۳/gi,"3").replace(/۴/gi,"4").replace(/۵/gi,"5").replace(/۶/gi,"6").replace(/۷/gi,"7").replace(/۸/gi,"8").replace(/۹/gi,"9").replace(/[^0-9.]/gi,"");""==e&&(e="0");var t=Number(e)*("fa"==SiteLang?1e3:1);$("[name=CreditAmount]").val(t),0==$(".SelectedPaymentMethod").length?$("#CreditChargeForm").submit():($(".circular-loader").show(),$.post("../../Account/ChargeCredit",{CreditAmount:t,portal:$(".SelectedPaymentMethod").attr("id").replace("btnPayment",""),s:$("[name=s]").val(),ri:$("[name=ri]").val(),source:"js"},function(e){e.Success?($("#PaymentModal #PaymentFrame").remove(),$("#PaymentModal .modal-dialog").after('<iframe id="PaymentFrame" src="'+e.PaymentURL+'" style="border:none; width:100vw; height:100vh;"></iframe>'),PaymentModalLoaded=!1,$("#PaymentFrame").on("load",function(){PaymentModalLoaded||($(".circular-loader").hide(),ShowErrorModal(Resource.Error,"An error occured in initializing payment process. Please try again in a few minutes."))})):(ShowErrorModal(Resource.Error,e.Message),$(".circular-loader").hide())}))}function GoForBuyResources(){$(".circular-loader").show(),$("#BuyCartItemsError").hide(),$.post("../../Home/BuyCartItems",{UseCreditCheckbox:$("#UseCreditCheckbox").prop("checked"),portal:0==$(".SelectedPaymentMethod").length?null:$(".SelectedPaymentMethod").attr("id").replace("btnPayment","")},function(e){e.Success?null!=e.RedirectURL&&""!=e.RedirectURL?null!=e.Message&&""!=e.Message?($("#PayAndDownloadButton").next().remove(),$("#PayAndDownloadButton").replaceWith('<div class="alert alert-success" role="alert">'+e.Message+'<a class="btn btn-success" style="width: 100%; font-size:90%;" href="'+e.RedirectURL+'" >'+Resource.Continue+"</a></div>")):window.location.href=e.RedirectURL:"fa"==SiteLang?window.location.href=e.PaymentURL:($("#PaymentModal #PaymentFrame").remove(),$("#PaymentModal .modal-dialog").after('<iframe id="PaymentFrame" src="'+e.PaymentURL+'" style="border:none; width:100vw; height:100vh;"></iframe>'),PaymentModalLoaded=!1,$("#PaymentFrame").on("load",function(){PaymentModalLoaded||($(".circular-loader").hide(),$("#BuyCartItemsError").html("An error occured in initializing payment process. Please try again in a few minutes.").show())})):($("#BuyCartItemsError").html(e.Message).show(),$(".circular-loader").hide())})}function PrepareModals(){$("#LoginModal").html('<div class="modal-dialog modal-dialog-centered">    <div class="modal-content">        <div class="modal-header" '+(SiteRTL?'style="direction:rtl;"':"")+'>            <p class="text-center text-primary modal-title">'+Resource["Login to account"]+'</p>            <button type="button" class="close" data-dismiss="modal" '+(SiteRTL?'style="margin: -1rem auto -1rem -1rem;"':"")+'>&times;</button>        </div>        <div class="modal-body" style="padding:1rem 3rem;">            <form>                <p id="LoginError" class="text-danger small" style="display:none; '+(SiteRTL?'direction: rtl; text-align: right;"':"")+'" ></p>                <div class="form-group input-group">                    <div class="input-group-prepend" '+(SiteRTL?'style="display:none;"':"")+'>                        <span class="input-group-text" style="font-size:85%;"><i class="fa fa-envelope"></i></span>                    </div>                    <input type="email" class="form-control full-width" placeholder="'+Resource["Email Address"]+'" name="email" '+(SiteRTL?'style="direction: rtl; border-bottom-left-radius: 0.25rem; border-top-left-radius: 0.25rem;"':"")+'>                    <div class="input-group-append" '+(SiteRTL?"":'style="display:none;"')+'>                        <span class="input-group-text" style="font-size:85%;"><i class="fa fa-envelope"></i></span>                    </div>                </div>                <div class="form-group input-group">                    <div class="input-group-prepend"'+(SiteRTL?'style="display:none;"':"")+'>                        <span class="input-group-text" style="font-size:85%;"><i class="fa fa-key"></i></span>                    </div>                    <input type="password" class="form-control full-width" placeholder="'+Resource.Password+'" name="password"'+(SiteRTL?'style="direction: rtl; border-bottom-left-radius: 0.25rem; border-top-left-radius: 0.25rem;"':"")+'>                    <div class="input-group-append"'+(SiteRTL?"":'style="display:none;"')+'>                        <span class="input-group-text" style="font-size:85%;"><i class="fa fa-key"></i></span>                    </div>                </div>                <div class="form-group" style="text-align: '+(SiteRTL?"left":"right")+'; line-height:50%;">                    <table style="width:100%; direction: '+(SiteRTL?"rtl":"ltr")+';">                        <tr>                            <td style="text-align:'+(SiteRTL?"right":"left")+"; "+(SiteRTL?"padding-right: 1.5rem;":"")+' color: #3a4553 !important; position:relative; top:0.25rem;" class="custom-control custom-checkbox">                                <input type="hidden" name="RememberMeCheckbox" value="false">                                <input type="checkbox" class="custom-control-input" id="RememberMeCheckbox">                                <label class="custom-control-label custom-control-labelRememberMe" for="RememberMeCheckbox">'+Resource["Remember Me"]+'</label>                            </td>                            <td style="text-align:'+(SiteRTL?"left":"right")+';">                                <a href="#" data-dismiss="modal" data-toggle="modal" data-target="#ForgetPasswordModal">'+Resource["Forgot password?"]+'</a>                            </td>                        </tr>                    </table>                </div>                <div class="form-group">                    <center><button id="LoginButton" type="button" class="form-control btn btn-success" onclick="Login($(\'#LoginModal [name=email]\').val(), $(\'#LoginModal [name=password]\').val(), $(\'#LoginModal #RememberMeCheckbox\').prop(\'checked\'));" style="width:200px;">'+Resource.Login+'</button></center>                </div>            </form>            <div style="width:100%; height:1px; border-top: 1px solid #ccc; margin:30px 0px;"></div>            <p class="text-center text-dark modal-title">                <span style="margin-bottom:10px; display:block;">'+Resource["or Login with:"]+'</span>                <a class="form-control btn btn-outline-secondary" style="width:200px; font-weight:bold; margin-top:5px;" href="#" onclick="window.location = \'../../../Account/GoogleOAuth?CP=\' + encodeURIComponent((window.location.href)); return false;" >                    <img class="GoogleIcon" src="../../Content/Icons/Google.png" style="height:24px; position:relative; top: -4px; right:10px;" />                    Google                </a>            </p>            <div style="width:100%; height:1px; border-top: 1px solid #ccc; margin:30px 0px;"></div>            <p class="text-center text-dark modal-title">                <span style="margin-bottom:10px; display:block;">'+Resource["Don't have an account?"]+'</span>                <a href="#" data-dismiss="modal" data-toggle="modal" data-target="#SignupModal">'+Resource["Sign Up"]+"</a>            </p>        </div>    </div></div>"),$("#LoginModal [name=password]").keypress(function(e){13==e.originalEvent.charCode&&$("#LoginModal #LoginButton").click()}),$("#LoginModal [name=email]").keypress(function(e){13==e.originalEvent.charCode&&$("#LoginModal #LoginButton").click()}),$("#ForgetPasswordModal").html('<div class="modal-dialog modal-dialog-centered">    <div class="modal-content">        <div class="modal-header" '+(SiteRTL?'style="direction:rtl;"':"")+'>            <p class="text-center text-primary modal-title">'+Resource["Reset account password"]+'</p>            <button type="button" class="close" data-dismiss="modal" '+(SiteRTL?'style="margin: -1rem auto -1rem -1rem;"':"")+'>&times;</button>        </div>        <div class="modal-body" style="padding:1rem 3rem;">            <p id="ForgetPasswordError" class="text-danger small" style="display:none;'+(SiteRTL?'direction: rtl; text-align: right;"':"")+'"></p>            <p id="ForgetPasswordSuccess" class="text-success small" style="display:none;'+(SiteRTL?'direction: rtl; text-align: right;"':"")+'"></p>            <form>                <div class="form-group input-group">                    <div class="input-group-prepend"'+(SiteRTL?'style="display:none;"':"")+'>                        <span class="input-group-text" style="font-size:85%;"><i class="fa fa-envelope"></i></span>                    </div>                    <input type="email" class="form-control full-width" placeholder="'+Resource["Email Address"]+'" name="email"'+(SiteRTL?'style="direction: rtl; border-bottom-left-radius: 0.25rem; border-top-left-radius: 0.25rem;"':"")+'>                    <div class="input-group-append"'+(SiteRTL?"":'style="display:none;"')+'>                        <span class="input-group-text" style="font-size:85%;"><i class="fa fa-envelope"></i></span>                    </div>                </div>                <div class="form-group">                    <center><button type="button" class="form-control btn btn-success" style="width:200px;" onclick="ForgotPassword($(\'#ForgetPasswordModal [name=email]\').val());">'+Resource["Reset Password"]+'</button></center>                </div>            </form>            <br />            <p class="text-center text-dark modal-title">'+Resource.or+' <a href="#" data-dismiss="modal" data-toggle="modal" data-target="#LoginModal">'+Resource.Login+"</a></p>        </div>    </div></div>"),$("#SignupModal").html('<div class="modal-dialog modal-dialog-centered">    <div class="modal-content">        <div class="modal-header" '+(SiteRTL?'style="direction:rtl;"':"")+' >            <p class="text-center text-primary modal-title">'+Resource["Create a new account"]+'</p>            <button type="button" class="close" data-dismiss="modal" '+(SiteRTL?'style="margin: -1rem auto -1rem -1rem;"':"")+'>&times;</button>        </div>        <div class="modal-body" style="padding:1rem 3rem;">            <p id="SignupError" class="text-danger small" style="display:none;'+(SiteRTL?'direction: rtl; text-align: right;"':"")+'"></p>            <p id="SignupSuccess" class="text-success small" style="display:none;'+(SiteRTL?'direction: rtl; text-align: right;"':"")+'"></p>            <form>                <div class="form-group input-group">                    <div class="input-group-prepend"'+(SiteRTL?'style="display:none;"':"")+'>                        <span class="input-group-text" style="font-size:85%;"><i class="fa fa-user"></i></span>                    </div>                    <input type="text" class="form-control full-width" placeholder="'+Resource["Full Name"]+'" name="fullName"'+(SiteRTL?'style="direction: rtl; border-bottom-left-radius: 0.25rem; border-top-left-radius: 0.25rem;"':"")+'>                    <div class="input-group-append"'+(SiteRTL?"":'style="display:none;"')+'>                        <span class="input-group-text" style="font-size:85%;"><i class="fa fa-user"></i></span>                    </div>                </div>                <div class="form-group input-group">                    <div class="input-group-prepend"'+(SiteRTL?'style="display:none;"':"")+'>                        <span class="input-group-text" style="font-size:85%;"><i class="fa fa-envelope"></i></span>                    </div>                    <input type="email" class="form-control full-width" placeholder="'+Resource["Email Address"]+'" name="email"'+(SiteRTL?'style="direction: rtl; border-bottom-left-radius: 0.25rem; border-top-left-radius: 0.25rem;"':"")+'>                    <div class="input-group-append"'+(SiteRTL?"":'style="display:none;"')+'>                        <span class="input-group-text" style="font-size:85%;"><i class="fa fa-envelope"></i></span>                    </div>                </div>                <div class="form-group input-group">                    <div class="input-group-prepend"'+(SiteRTL?'style="display:none;"':"")+'>                        <span class="input-group-text" style="font-size:85%;"><i class="fa fa-key"></i></span>                    </div>                    <input type="password" class="form-control full-width" placeholder="'+Resource.Password+'" name="password"'+(SiteRTL?'style="direction: rtl; border-bottom-left-radius: 0.25rem; border-top-left-radius: 0.25rem;"':"")+'>                    <div class="input-group-append"'+(SiteRTL?"":'style="display:none;"')+'>                        <span class="input-group-text" style="font-size:85%;"><i class="fa fa-key"></i></span>                    </div>                </div>                <div class="form-group input-group">                    <div class="input-group-prepend"'+(SiteRTL?'style="display:none;"':"")+'>                        <span class="input-group-text" style="font-size:85%;"><i class="fa fa-key"></i></span>                    </div>                    <input type="password" class="form-control full-width" placeholder="'+Resource["Confirm Password"]+'" name="passwordRepeat"'+(SiteRTL?'style="direction: rtl; border-bottom-left-radius: 0.25rem; border-top-left-radius: 0.25rem;"':"")+'>                    <div class="input-group-append"'+(SiteRTL?"":'style="display:none;"')+'>                        <span class="input-group-text" style="font-size:85%;"><i class="fa fa-key"></i></span>                    </div>                </div>                <div class="form-group" style="mar">                    <center><button type="button" class="form-control btn btn-success" style="width:200px;" onclick="Signup($(\'#SignupModal [name=fullName]\').val(), $(\'#SignupModal [name=email]\').val(), $(\'#SignupModal [name=password]\').val(), $(\'#SignupModal [name=passwordRepeat]\').val());">'+Resource["Sign Up"]+'</button></center>                </div>            </form>            <br />            <p class="text-center text-dark modal-title">'+Resource["Already have an account?"]+'                <br /><a href="#" data-dismiss="modal" data-toggle="modal" data-target="#LoginModal">'+Resource.Login+"</a>            </p>        </div>    </div></div>"),$("#ErrorModal").html('<div class="modal-dialog modal-dialog-centered">    <div class="modal-content" style="color:#721c24; background-color:#f8d7da;">        <div class="modal-header" '+(SiteRTL?'style="direction:rtl;"':"")+' >            <p id="ErrorModalTitle" class="text-center modal-title"></p>            <button type="button" class="close" data-dismiss="modal"'+(SiteRTL?'style="margin: -1rem auto -1rem -1rem;"':"")+'>&times;</button>        </div>        <div class="modal-body" '+(SiteRTL?'style="direction: rtl; text-align: right;"':"")+'>            <span id="ErrorModalText"></span>        </div>        <div class="modal-footer" '+(SiteRTL?'style="direction: rtl; text-align: right;"':"")+'>            <button type="button" class="btn btn-outline-secondary" data-dismiss="modal">'+Resource["OK "]+"</button>        </div>    </div></div>"),$("#SuccessModal").html('<div class="modal-dialog modal-dialog-centered">    <div class="modal-content" style="color:#155724; background-color:#d4edda;">        <div class="modal-header" '+(SiteRTL?'style="direction:rtl;"':"")+' >            <p id="SuccessModalTitle" class="text-center modal-title"></p>            <button type="button" class="close" data-dismiss="modal"'+(SiteRTL?'style="margin: -1rem auto -1rem -1rem;"':"")+'>&times;</button>        </div>        <div class="modal-body" '+(SiteRTL?'style="direction: rtl; text-align: right;"':"")+'>            <span id="SuccessModalText"></span>        </div>        <div class="modal-footer" '+(SiteRTL?'style="direction: rtl; text-align: right;"':"")+'>            <button type="button" class="btn btn-outline-secondary" data-dismiss="modal">'+Resource["OK "]+"</button>        </div>    </div></div>"),$("#ConfirmModal").html('<div class="modal-dialog modal-dialog-centered">    <div class="modal-content" style="color:#856404; background-color:#fff3cd;">        <div class="modal-header" '+(SiteRTL?'style="direction:rtl;"':"")+' >            <p id="ConfirmModalTitle" class="text-center modal-title"></p>            <button type="button" class="close" data-dismiss="modal"'+(SiteRTL?'style="margin: -1rem auto -1rem -1rem;"':"")+'>&times;</button>        </div>        <div class="modal-body" '+(SiteRTL?'style="direction: rtl; text-align: right;"':"")+'>            <span id="ConfirmModalText"></span>        </div>        <div class="modal-footer" '+(SiteRTL?'style="direction: rtl; text-align: right;"':"")+'>            <button type="button" class="btn btn-outline-secondary" data-dismiss="modal" onclick="ShowConfirmModalOnOK();" '+(SiteRTL?'style="margin-left:0.25rem;"':"")+">"+Resource.OK+'</button>            <button type="button" class="btn btn-outline-secondary" data-dismiss="modal">'+Resource.Cancel+"</button>        </div>    </div></div>"),$("#WaitingDIV").html('<svg id="wrap" viewBox="0 0 300 300" style="position: relative; width:100px; height:100px; left: calc(50vw - 50px); top: calc(50vh - 50px); ">    <svg>        <circle cx="150" cy="150" r="130" style="stroke: lightblue; stroke-width:18; fill:transparent" />        <circle cx="150" cy="150" r="115" style="fill:#2c3e50" />        <path style="stroke: #2c3e50; stroke-dasharray:820; stroke-dashoffset:820; stroke-width:18; fill:transparent" d="M150,150 m0,-130 a 130,130 0 0,1 0,260 a 130,130 0 0,1 0,-260">            <animate attributeName="stroke-dashoffset" dur="6s" to="-820" repeatCount="indefinite" />        </path>    </svg>    <svg>        <path id="hourglass" d="M150,150 C60,85 240,85 150,150 C60,215 240,215 150,150 Z" style="stroke: white; stroke-width:5; fill:white;" />        <path id="frame" d="M100,97 L200, 97 M100,203 L200,203 M110,97 L110,142 M110,158 L110,200 M190,97 L190,142 M190,158 L190,200 M110,150 L110,150 M190,150 L190,150" style="stroke:lightblue; stroke-width:6; stroke-linecap:round" />        <animateTransform xlink:href="#frame" attributeName="transform" type="rotate" begin="0s" dur="3s" values="0 150 150; 0 150 150; 180 150 150" keyTimes="0; 0.8; 1" repeatCount="indefinite" />        <animateTransform xlink:href="#hourglass" attributeName="transform" type="rotate" begin="0s" dur="3s" values="0 150 150; 0 150 150; 180 150 150" keyTimes="0; 0.8; 1" repeatCount="indefinite" />    </svg>    <svg>        <polygon id="upper" points="120,125 180,125 150,147" style="fill:#2c3e50;">            <animate attributeName="points" dur="3s" keyTimes="0; 0.8; 1" values="120,125 180,125 150,147; 150,150 150,150 150,150; 150,150 150,150 150,150" repeatCount="indefinite" />        </polygon>        <path id="line" stroke-linecap="round" stroke-dasharray="1,4" stroke-dashoffset="200.00" stroke="#2c3e50" stroke-width="2" d="M150,150 L150,198">            <animate attributeName="stroke-dashoffset" dur="3s" to="1.00" repeatCount="indefinite" />            <animate attributeName="d" dur="3s" to="M150,195 L150,195" values="M150,150 L150,198; M150,150 L150,198; M150,198 L150,198; M150,195 L150,195" keyTimes="0; 0.65; 0.9; 1" repeatCount="indefinite" />            <animate attributeName="stroke" dur="3s" keyTimes="0; 0.65; 0.8; 1" values="#2c3e50;#2c3e50;transparent;transparent" to="transparent" repeatCount="indefinite" />        </path>        <g id="lower">            <path d="M150,180 L180,190 A28,10 0 1,1 120,190 L150,180 Z" style="stroke: transparent; stroke-width:5; fill:#2c3e50;">                <animateTransform attributeName="transform" type="translate" keyTimes="0; 0.65; 1" values="0 15; 0 0; 0 0" dur="3s" repeatCount="indefinite" />            </path>            <animateTransform xlink:href="#lower" attributeName="transform"            type="rotate"            begin="0s" dur="3s"            values="0 150 150; 0 150 150; 180 150 150"            keyTimes="0; 0.8; 1"            repeatCount="indefinite" />        </g>        <path d="M150,150 C60,85 240,85 150,150 C60,215 240,215 150,150 Z" style="stroke: white; stroke-width:5; fill:transparent;">            <animateTransform attributeName="transform"            type="rotate"            begin="0s" dur="3s"            values="0 150 150; 0 150 150; 180 150 150"            keyTimes="0; 0.8; 1"            repeatCount="indefinite" />        </path>        <path id="frame" d="M100,97 L200, 97 M100,203 L200,203" style="stroke:lightblue; stroke-width:6; stroke-linecap:round">            <animateTransform attributeName="transform"            type="rotate"            begin="0s" dur="3s"            values="0 150 150; 0 150 150; 180 150 150"            keyTimes="0; 0.8; 1"            repeatCount="indefinite" />        </path>    </svg></svg>')}function AccountInformation_ShowErrorSection(e,t){null==e?$(t).hide():$(t).html(e).show()}function SubmitAccountInformations(){AccountInformation_ShowErrorSection(null,"#InformationSubmitError"),$("#InformationSubmitSuccess").hide();var e=$("#AccountInformationForm [name=fullName]").val(),t=$("#AccountInformationForm [name=oldPassword]").val(),a=$("#AccountInformationForm [name=newPassword]").val(),r=$("#AccountInformationForm [name=passwordRepeat]").val();if(""!=e){var o=""!=t||""!=a||""!=r;if(o){if(""==t&&!CurrentPasswordIdNull)return void AccountInformation_ShowErrorSection(Resource["Enter the current password."],"#InformationSubmitError");if(""==a)return void AccountInformation_ShowErrorSection(Resource["Enter new password."],"#InformationSubmitError");if(a!=r)return void AccountInformation_ShowErrorSection(Resource["The password and its repetition are not the same."],"#InformationSubmitError")}return $.post("../../Account/SubmitInformations",{FullName:e,OldPassword:t,NewPassword:a},function(e){e.Success?(AccountInformation_ShowErrorSection(null,"#InformationSubmitError"),$("#InformationSubmitSuccess").html(Resource["Changes applied successfully!"]).show()):AccountInformation_ShowErrorSection(e.Message,"#InformationSubmitError")},"json"),!1}AccountInformation_ShowErrorSection("Enter your full name.","#InformationSubmitError")}function RelatedResourcesNavigate(e){if(!RelatedResourcesNavigationDisabled){RelatedResourcesNavigationDisabled=!0;var t=!1;if(LargeTileIsEnabled?(RelatedResourcesCurrentPage_LargeTileIndex+=e,-1==RelatedResourcesCurrentPage_LargeTileIndex?(RelatedResourcesCurrentPage_LargeTileIndex=WindowIsSmall?1:3,RelatedResourcesCurrentPage--,t=!0):RelatedResourcesCurrentPage_LargeTileIndex==(WindowIsSmall?2:4)&&(RelatedResourcesCurrentPage_LargeTileIndex=0,RelatedResourcesCurrentPage++,t=!0),RelatedResourcesCurrentPage=(RelatedResourcesCurrentPage+PagesHtml.length)%PagesHtml.length):(RelatedResourcesCurrentPage+=e,RelatedResourcesCurrentPage=(RelatedResourcesCurrentPage+PagesHtml.length)%PagesHtml.length,t=!0),t){var a={};a["_"+(Number($("#RelatedResourcesTilesPage1")[0].style.left.replace("%",""))+9e6)]=1,a["_"+(Number($("#RelatedResourcesTilesPage2")[0].style.left.replace("%",""))+9e6)]=2,a["_"+(Number($("#RelatedResourcesTilesPage3")[0].style.left.replace("%",""))+9e6)]=3,a=SortHash(a);var r=[];for(var o in a)r[r.length]=a[o];var i=1==e?r[0]:r[2];$("#RelatedResourcesTilesPage1").css("z-index",100).css("left",Number($("#RelatedResourcesTilesPage1")[0].style.left.replace("%",""))-100*e+"%"),$("#RelatedResourcesTilesPage2").css("z-index",100).css("left",Number($("#RelatedResourcesTilesPage2")[0].style.left.replace("%",""))-100*e+"%"),$("#RelatedResourcesTilesPage3").css("z-index",100).css("left",Number($("#RelatedResourcesTilesPage3")[0].style.left.replace("%",""))-100*e+"%"),$("#RelatedResourcesTilesPage"+i).css("z-index",99).css("left",Number($("#RelatedResourcesTilesPage"+i)[0].style.left.replace("%",""))+300*e+"%");var n=RelatedResourcesCurrentPage+e;n=(n+PagesHtml.length)%PagesHtml.length,$("#RelatedResourcesTilesPage"+i).html(PagesHtml[n]),checkForRelatedResourcesAddedToCart()}if(LargeTileIsEnabled){a={};a["_"+(Number($("#RelatedResourcesTilesPage1_Large")[0].style.left.replace("%",""))+9e6)]=1,a["_"+(Number($("#RelatedResourcesTilesPage2_Large")[0].style.left.replace("%",""))+9e6)]=2,a["_"+(Number($("#RelatedResourcesTilesPage3_Large")[0].style.left.replace("%",""))+9e6)]=3,a=SortHash(a);r=[];for(var o in a)r[r.length]=a[o];i=1==e?r[0]:r[2];var s=1==e?r[2]:r[0];$("#RelatedResourcesTilesPage1_Large").css("z-index",200).css("left",Number($("#RelatedResourcesTilesPage1_Large")[0].style.left.replace("%",""))-100*e+"%"),$("#RelatedResourcesTilesPage2_Large").css("z-index",200).css("left",Number($("#RelatedResourcesTilesPage2_Large")[0].style.left.replace("%",""))-100*e+"%"),$("#RelatedResourcesTilesPage3_Large").css("z-index",200).css("left",Number($("#RelatedResourcesTilesPage3_Large")[0].style.left.replace("%",""))-100*e+"%"),$("#RelatedResourcesTilesPage"+i+"_Large").css("z-index",199).css("left",Number($("#RelatedResourcesTilesPage"+i+"_Large")[0].style.left.replace("%",""))+300*e+"%");n=RelatedResourcesCurrentPage*(WindowIsSmall?2:4)+RelatedResourcesCurrentPage_LargeTileIndex+e;n=(n+LargePagesHtml.length)%LargePagesHtml.length,$("#RelatedResourcesTilesPage"+i+"_Large").html(LargePagesHtml[n]),checkForRelatedResourcesAddedToCart();var l=$("#RelatedResourcesTilesPage"+s+"_Large .LargeTile > div").attr("data-resId");setTimeout(function(){$(".GridTile .LargeTile .fa-compress").removeClass("fa-compress").addClass("fa-expand"),$(".GridTile .LargeTile").removeClass("LargeTile"),$(".GridTile [data-resId="+l+"] .TileToggleButton i").removeClass("fa-expand").addClass("fa-compress"),$(".GridTile [data-resId="+l+"] .TileToggleButton").parent().parent().addClass("LargeTile"),OnResizeForRelatedResources()},420)}setTimeout(function(){OnResizeForRelatedResources(),RelatedResourcesNavigationDisabled=!1},410)}}function ToggleLargeTile(e,t){if(LargeTileIsEnabled=!LargeTileIsEnabled,$(".GridTile .LargeTile").each(function(){var e=$(this);$(e).removeClass("LargeTile").addClass("LargeTileBecomingSmall"),setTimeout(function(){$(e).removeClass("LargeTileBecomingSmall")},300)}),LargeTileIsEnabled){$(e).children("i").removeClass("fa-expand").addClass("fa-compress"),$(e).parent().parent().addClass("LargeTile"),setTimeout(function(){$(".NotGridTile").css("visibility","visible")},300),RelatedResourcesCurrentPage_LargeTileIndex=WindowIsSmall?$(e).parent().parent().hasClass("TileTopLeft")?0:1:$(e).parent().parent().hasClass("TileTopLeft")?0:$(e).parent().parent().hasClass("TileTopRight")?1:$(e).parent().parent().hasClass("TileBottomLeft")?2:3;var a=RelatedResourcesCurrentPage*(WindowIsSmall?2:4)+RelatedResourcesCurrentPage_LargeTileIndex;a=(a+LargePagesHtml.length)%LargePagesHtml.length;var r=a-1;r=(r+LargePagesHtml.length)%LargePagesHtml.length;var o=a+1;o=(o+LargePagesHtml.length)%LargePagesHtml.length;var i={};i["_"+(Number($("#RelatedResourcesTilesPage1_Large")[0].style.left.replace("%",""))+9e6)]=1,i["_"+(Number($("#RelatedResourcesTilesPage2_Large")[0].style.left.replace("%",""))+9e6)]=2,i["_"+(Number($("#RelatedResourcesTilesPage3_Large")[0].style.left.replace("%",""))+9e6)]=3,i=SortHash(i);var n=[];for(var s in i)n[n.length]=i[s];$("#RelatedResourcesTilesPage"+n[0]+"_Large").css("left","-100%").html(LargePagesHtml[r]),$("#RelatedResourcesTilesPage"+n[1]+"_Large").css("left","0%").html(LargePagesHtml[a]),$("#RelatedResourcesTilesPage"+n[2]+"_Large").css("left","100%").html(LargePagesHtml[o]),checkForRelatedResourcesAddedToCart(),setTimeout(function(){var e=$("[data-resid="+$("#RelatedResourcesTilesPage"+n[1]+"_Large [data-resid]").attr("data-resid")+"] .resourceDescription"),t=$(e).attr("data-truncateddescription"),a=$(e).html();""!=t&&($(e).attr("data-truncateddescription",""),$(e).html(a.substring(0,a.length-4)+t))},50)}else $(".GridTile [data-resid="+$(e).parent().attr("data-resid")+"] .TileToggleButton").children("i").removeClass("fa-compress").addClass("fa-expand"),$(".NotGridTile").css("visibility","hidden");setTimeout(OnResizeForRelatedResources,310)}function OnResizeForRelatedResources(){$(".resourceDescription").each(function(){var e=$(this).html().split(" ");"..."!=e[e.length-1]&&(e[e.length]="...");var t=$(this).attr("data-truncateddescription").split(" "),a=$(this).parent().parent(),r=IsElementOverflowed(a);if(!r||0!=e.length){for(;r&&e.length>1;){var o=e.splice(e.length-2,1)[0];t.splice(0,0,o);for(var i="",n=0;n<e.length;n++)i+=" "+e[n];$(this).html(i),r=IsElementOverflowed(a)}for(;!r&&0!=t.length;){var s=t.splice(0,1)[0];e.splice(e.length-1,0,s);for(i="",n=0;n<e.length;n++)i+=" "+e[n];$(this).html(i),r=IsElementOverflowed(a)}if(r){o=e.splice(e.length-2,1)[0];t.splice(0,0,o);for(i="",n=0;n<e.length;n++)i+=" "+e[n];$(this).html(i)}if(0==t.length){for(i="",n=0;n<e.length-1;n++)i+=" "+e[n];$(this).html(i)}var l="";for(n=0;n<t.length;n++)l+=" "+t[n];$(this).attr("data-truncateddescription",l)}})}function IsElementOverflowed(e){return e=e[0],e.offsetHeight<e.scrollHeight||e.offsetWidth<e.scrollWidth}function CreatePagesHtml(){PagesHtml=[];for(var e=0;e<RelatedResources.length;e++){var t=Math.floor(e/(WindowIsSmall?2:4));null==PagesHtml[t]&&(PagesHtml[t]=[]);var a="background-color:"+TypesColors[RelatedResources[e].Type]+";";RelatedResources[e].Type.replace(" ","")
;PagesHtml[t][PagesHtml[t].length]='<div data-resId="'+RelatedResources[e].Id+'" href="../../../Item/?id='+RelatedResources[e].Id+'" data-index="'+e+'" style="cursor:pointer;" target="_blank" onclick="ResourceClicked($(this));" class="list-group-item list-group-item-action d-flex" >    <div class="flex-grow-0">        <img src="../../../Resources/ThumbSmall/'+RelatedResources[e].ContentTypeName+"/"+RelatedResources[e].ThumbSmall+'" />        <button class="BuyButtons btn btn-info btn-sm mb-1 mt-1" style="padding-top:0px; padding-bottom:0px; width: 100px;" onclick="ResourceNotClicked = true; setTimeout(function () { ResourceNotClicked = false; }, 100); BuyNow(\''+RelatedResources[e].Id+'\');"><i style="margin-top:3px; font-size:160%;" class="fa fa-download"></i></button>        <button class="BuyButtons AddToCartButton btn btn-outline-info btn-sm" style="position:relative; padding-top:0px; padding-bottom:0px; width: 100px;" onclick="ResourceNotClicked = true; setTimeout(function () { ResourceNotClicked = false; }, 100); RelatedResourcesAddedToCart[\''+RelatedResources[e].Id+"'] = true; AddToCart($(this), '"+RelatedResources[e].Id+'\');"><i style="font-size: 140%;position: absolute;right: -2px;top: 2px;" class="fa fa-plus-circle"></i></button>        <button class="BuyButtons RemoveFromCartButton btn btn-danger btn-sm" style="position:relative; padding-top:0px; padding-bottom:0px; width: 100px;" onclick="ResourceNotClicked = true; setTimeout(function () { ResourceNotClicked = false; }, 100); delete RelatedResourcesAddedToCart[\''+RelatedResources[e].Id+"'];  RemoveFromCart($(this), '"+RelatedResources[e].Id+'\', false);"><i style="font-size: 140%;position: absolute;right: -2px;top: 2px;" class="fa fa-times-circle"></i></button>    </div>    <button class="btn btn-outline-danger btn-sm TileToggleButton" style="padding-top:0px; padding-bottom:0px; width: 40px; position: absolute; bottom: 5px; right: 24px;" onclick="ResourceNotClicked = true; setTimeout(function () { ResourceNotClicked = false; }, 100); ToggleLargeTile($(this), false);"><i style="margin-top:3px; font-size:160%;" class="fa fa-expand"></i></button>    <div class="ml-3 flex-grow-1" style="padding-right:5px;">        <h6 class="list-group-item-heading TitleForContentType'+RelatedResources[e].ContentTypeName+'" style="font-weight:600 !important;" >'+stripHtml(RelatedResources[e].Title)+'</h6>        <p class="PublisherYearPriceSection" style="font-weight:bold; margin-bottom:6px;">'+("Ebook"==RelatedResources[e].Type?'Publisher: <span style="color:#3c3cd7;">'+RelatedResources[e].Publisher+"</span>, &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;":"")+'Year: <span style="color:#3c3cd7;">'+RelatedResources[e].Year+'</span>, &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Price: <span style="color:#3c3cd7;">'+RelatedResources[e].Price+' <img src="../../../Content/Icons/Price.png" style="width:20px;" /></span></p>        <p class="list-group-item-text resourceDescription contentType'+RelatedResources[e].ContentTypeName+'" data-truncateddescription="" style="font-weight:400;" >'+stripHtml(RelatedResources[e].Description)+'</p>    </div>    <div class="flex-grow-0" style="min-width:10px;"></div>    <div class="flex-grow-0 flex-shrink-0" style="width:20px; min-width:20px; margin:-5px; border-radius: 0 0.25rem 0.25rem 0;'+a+'">        <div style="transform: rotate(90deg); color:'+getForegroundColor(TypesColors[RelatedResources[e].Type])+'; position: relative; top: 4px; left:2px;">'+RelatedResources[e].Type.replace("Engineering Doc","Eng.Doc").replace(" ","&nbsp;")+" </div>    </div></div>"}LargePagesHtml=[];for(e=0;e<PagesHtml.length;e++)for(var r=0;r<PagesHtml[e].length;r++)LargePagesHtml[LargePagesHtml.length]=PagesHtml[e][r].replace("fa-expand","fa-compress");for(e=0;e<PagesHtml.length;e++)PagesHtml[e]=WindowIsSmall?'<table style="width:100%; height:325px;" cellspacing="0" cellpadding="0">    <tr style="height:50%;">        <td class="RelatedResourcesGridTile ForSmallWindow TileTopLeft">'+PagesHtml[e][0]+'</td>    </tr>    <tr style="height:50%;">        <td class="RelatedResourcesGridTile ForSmallWindow TileBottomLeft">'+PagesHtml[e][1]+"</td>    </tr></table>":'<table style="width:100%; height:325px;" cellspacing="0" cellpadding="0">    <tr style="height:50%;">        <td class="RelatedResourcesGridTile TileTopLeft">'+PagesHtml[e][0]+'</td>        <td class="RelatedResourcesGridTile TileTopRight">'+PagesHtml[e][1]+'</td>    </tr>    <tr style="height:50%;">        <td class="RelatedResourcesGridTile TileBottomLeft">'+PagesHtml[e][2]+'</td>        <td class="RelatedResourcesGridTile TileBottomRight">'+PagesHtml[e][3]+"</td>    </tr></table>";for(e=0;e<LargePagesHtml.length;e++)LargePagesHtml[e]=WindowIsSmall?'<table style="width:100%; height:325px;" cellspacing="0" cellpadding="0">    <tr style="height:50%;">        <td class="RelatedResourcesGridTile ForSmallWindow TileTopLeft LargeTile">'+LargePagesHtml[e]+'</td>    </tr>    <tr style="height:50%;">        <td class="RelatedResourcesGridTile ForSmallWindow TileBottomLeft"><div></div></td>    </tr></table>':'<table style="width:100%; height:325px;" cellspacing="0" cellpadding="0">    <tr style="height:50%;">        <td class="RelatedResourcesGridTile TileTopLeft LargeTile">'+LargePagesHtml[e]+'</td>        <td class="RelatedResourcesGridTile TileTopRight"><div></div></td>    </tr>    <tr style="height:50%;">        <td class="RelatedResourcesGridTile TileBottomLeft"><div></div></td>        <td class="RelatedResourcesGridTile TileBottomRight"><div></div></td>    </tr></table>'}function checkForRelatedResourcesAddedToCart(){for(var e in $("#RelatedResourcesContainer .AddToCartButton").show(),$("#RelatedResourcesContainer .RemoveFromCartButton").hide(),RelatedResourcesAddedToCart)$("[data-resId="+e+"] .AddToCartButton").hide(),$("[data-resId="+e+"] .RemoveFromCartButton").show();$(".GridTile .BuyButtons, .GridTile .PublisherYearPriceSection").hide(),$(".NotGridTile .BuyButtons, .NotGridTile .PublisherYearPriceSection").show()}function InitializeRelatedResourcesSection(){CreatePagesHtml();var e={};e["_"+(Number($("#RelatedResourcesTilesPage1")[0].style.left.replace("%",""))+9e6)]=1,e["_"+(Number($("#RelatedResourcesTilesPage2")[0].style.left.replace("%",""))+9e6)]=2,e["_"+(Number($("#RelatedResourcesTilesPage3")[0].style.left.replace("%",""))+9e6)]=3,e=SortHash(e);var t=[];for(var a in e)t[t.length]=e[a];var r=RelatedResourcesCurrentPage,o=r+1;o=(o+PagesHtml.length)%PagesHtml.length;var i=r+1;if(i=(i+PagesHtml.length)%PagesHtml.length,$("#RelatedResourcesTilesPage"+t[0]).html(PagesHtml[i]),$("#RelatedResourcesTilesPage"+t[1]).html(PagesHtml[r]),$("#RelatedResourcesTilesPage"+t[2]).html(PagesHtml[o]),LargeTileIsEnabled){for(var a in e={},e["_"+(Number($("#RelatedResourcesTilesPage1_Large")[0].style.left.replace("%",""))+9e6)]=1,e["_"+(Number($("#RelatedResourcesTilesPage2_Large")[0].style.left.replace("%",""))+9e6)]=2,e["_"+(Number($("#RelatedResourcesTilesPage3_Large")[0].style.left.replace("%",""))+9e6)]=3,e=SortHash(e),t=[],e)t[t.length]=e[a];r=RelatedResourcesCurrentPage*(WindowIsSmall?2:4)+RelatedResourcesCurrentPage_LargeTileIndex,o=r+1,o=(o+LargePagesHtml.length)%LargePagesHtml.length,i=r+1,i=(i+LargePagesHtml.length)%LargePagesHtml.length,$("#RelatedResourcesTilesPage"+t[0]+"_Large").html(LargePagesHtml[i]),$("#RelatedResourcesTilesPage"+t[1]+"_Large").html(LargePagesHtml[r]),$("#RelatedResourcesTilesPage"+t[2]+"_Large").html(LargePagesHtml[o])}checkForRelatedResourcesAddedToCart(),setTimeout(OnResizeForRelatedResources,100)}function SelectPaymentMethod(e){$(e).parent().parent().find(".SelectedPaymentMethod").removeClass("SelectedPaymentMethod"),$(e).addClass("SelectedPaymentMethod"),$("#FinalPaymentOKButton").removeAttr("disabled"),$("#PayAndDownloadButton").removeAttr("disabled")}function preventDefault(e){if(WindowWheeled(e.deltaY>1||!(e.deltaY<1)&&null),e=e||window.event,e.preventDefault)try{e.preventDefault()}catch(e){}e.returnValue=!1}function preventDefaultForScrollKeys(e){if(keys[e.keyCode])return preventDefault(e),!1}function disableScroll(){window.addEventListener&&window.addEventListener("DOMMouseScroll",preventDefault,!1),document.addEventListener("wheel",preventDefault,{passive:!1}),window.onwheel=preventDefault,window.onmousewheel=document.onmousewheel=preventDefault,window.ontouchmove=preventDefault,document.onkeydown=preventDefaultForScrollKeys}function enableScroll(){window.removeEventListener&&window.removeEventListener("DOMMouseScroll",preventDefault,!1),document.removeEventListener("wheel",preventDefault,{passive:!1}),window.onmousewheel=document.onmousewheel=null,window.onwheel=null,window.ontouchmove=null,document.onkeydown=null}function CalculateSectionsHeight(){var e=[$(window).height(),Math.round($("#ContentTypeTilesContainer").height()/$(window).height()*1e3)/1e3*$(window).height()];$(".SpecificationPage").each(function(){e[e.length]=$(this).height()}),e[e.length]=$(".PageFooter").height(),sectionsHeight=[];for(var t=0;t<e.length;t++){sectionsHeight[t]={Height:e[t],InnerSectionsScrollTop:[]};for(var a=0;a<Math.ceil(e[t]/$(window).height());a++)a==Math.ceil(e[t]/$(window).height())-1?sectionsHeight[t].InnerSectionsScrollTop[a]=e[t]-$(window).height():sectionsHeight[t].InnerSectionsScrollTop[a]=a*$(window).height()}CalculateCurrentSectionBasedOnScrollTop()}function CalculateCurrentSectionBasedOnScrollTop(){currentSection=[0,0];for(var e=0,t=0;t<sectionsHeight.length;t++)if(e+=sectionsHeight[t].Height,!($(window).scrollTop()>=e-10)){currentSection[0]=t,currentSection[1]=0;for(var a=1;a<sectionsHeight[t].InnerSectionsScrollTop.length;a++)$(window).scrollTop()>=e-sectionsHeight[t].Height+sectionsHeight[t].InnerSectionsScrollTop[a]&&(currentSection[1]=a);break}var r=0;for(t=0;t<currentSection[0];t++)r+=sectionsHeight[t].Height;for(t=0;t<currentSection[1];t++)r+=sectionsHeight[currentSection[0]].InnerSectionsScrollTop[t];$(window).scrollTop(r)}function WindowWheeled(e){if(null!=e&&!AutoScrollingInProgress){e?currentSection[1]==sectionsHeight[currentSection[0]].InnerSectionsScrollTop.length-1?currentSection[0]<sectionsHeight.length-1&&(currentSection[0]++,currentSection[1]=0):currentSection[1]++:0==currentSection[1]?currentSection[0]>0&&(currentSection[0]--,currentSection[1]=sectionsHeight[currentSection[0]].InnerSectionsScrollTop.length-1):currentSection[1]--;for(var t=0,a=0;a<currentSection[0];a++)t+=sectionsHeight[a].Height;t+=sectionsHeight[currentSection[0]].InnerSectionsScrollTop[currentSection[1]],AutoScrollingInProgress=!0;var r=function(e){Math.abs($(window).scrollTop()-t)<1||e>100?setTimeout(function(){AutoScrollingInProgress=!1},1):(recentScrolls.length>=3&&recentScrolls[recentScrolls.length-1]==recentScrolls[recentScrolls.length-2]&&recentScrolls[recentScrolls.length-2]==recentScrolls[recentScrolls.length-3]&&(recentScrolls=[],window.scrollTo({top:t,left:0,behavior:"smooth"})),recentScrolls[recentScrolls.length]=$(window).scrollTop(),setTimeout(function(){r(e+1)},isChrome?30:10))};recentScrolls=[],window.scrollTo({top:t,left:0,behavior:"smooth"}),r(0)}}function windowsScrolled(){var e=Math.min($(window).scrollTop(),$(window).height())/$(window).height();$(".navbar.navbar-dark").css("opacity",e),0==e?$(".navbar.navbar-dark").hide():$(".navbar.navbar-dark").show()}function fetchSampleFiles(){var e=0,t=function(){e--,0==e&&(LastWindowSize=[0,0],$(window).resize())};$(".SpecificationPage").each(function(a,r){var o={software:1,ebook:2,engdoc:3,training:4,documentary:5,standard:6,magazine:7,thesis:8,paper:9,ptraining:10},i=$($(this).find("h2")[0]).attr("class");if(""!=i&&null!=i&&null!=i){var n=o[i];$.post("../../Search/Search",{HomePageItems:n},function(e){var a=$($(r).find(".col-lg-6")[1]);resourcesDraw(e.Resources,0,function(){$(".ContentTypeTransformedLabel").each(function(){$(this).height($(this).parent().parent().height())}),t()},"#"+$(a).attr("id"),"#ResourcesContainerHidden_"+i)},"json"),e++}})}function arrangeHomePageTiles(){var e=$("#ContentTypeTilesContainer").width(),t=$(window).height()-70-$($("#ContentTypeTilesContainer > div")[2]).height()-30,a=e/3-5,r=t/3-5;a/r>7/4?a=7*r/4:a/r<5/4&&(r=a/(5/4)),e=3*a;var o=.05*r;r-=2*o,a-=2*o,r=Math.round(r),a=Math.round(a),o=Math.round(o),e=3*a+4*o,$("a.HomePageTileHStyle").each(function(){$(this).css("width",a+"px").css("height",r+"px").css("margin",o+"px").css("font-size",Math.sqrt(Math.pow(a,2)+Math.pow(r,2))/14.5+"px"),$(this).find("span.Title").css("line-height",r-30+"px"),$(this).find("span.Description").css("line-height",Math.sqrt(Math.pow(a,2)+Math.pow(r,2))/14.5+"px")}),$("#AdvSearchTable").css("width",e+6+"px"),$("#AdvancedSearchPanel").css("width",e+7+"px"),$("#HomePageVerticalAlignMiddlePlaceHolder").css("height",(t-3*r-6*o)/2-0+"px")}var AfterLoginCallback,qWords,LastSearchReturnData,ShowConfirmModalOnOK,RelatedResourcesContainerSize,CartFormTotalPrice=0,CartFormCredit=0,ResourceNotClicked=!1,DontTriggerChangeForYearRange=!1,FindPublisherLastSearched=null,FindPublisherShowingIndex=-1,FindPublisherFoundResult=[],FindJournalLastSearched=null,FindJournalShowingIndex=-1,FindJournalFoundResult=[],resourcesPaginationData={currentPage:1,totalPages:1},ResourceDescriptionToggleJustClicked=!1,PreventResourceBinding=0,CurrentState=null,AllFilterTypes={},AllFilterPublishers={},AllFilterJournals={},AllFilterCategories={},AllFilterYears={},checkingURLState=!1,LastFilterChangeId=null,PreviouseSearchDrawWidth=0,AutocompleteResultJustEntered=!1,WindowIsSmall=!1;$(document).ready(function(){for(;$(".navbar.navbar-expand-lg.bg-dark.navbar-dark.fixed-top").height()>75;)$(".navbar.navbar-expand-lg.bg-dark.navbar-dark.fixed-top svg").width($(".navbar.navbar-expand-lg.bg-dark.navbar-dark.fixed-top svg").width()-1);for(var e=["HeaderSearchInput_Title","HeaderSearchInput_Author","HeaderSearchInput_Description","HeaderSearchInput_Keywords","HeaderSearchInput_ISBN","HeaderSearchInput_DOI"],t=0;t<e.length;t++)$("#"+e[t]).on("input",function(){$(this).parent().find(".input-group-text").css("background-color",""==$(this).val()?"rgb(220, 222, 226)":"rgb(246, 254, 121)")}),$("#"+e[t]).trigger("input");PrepareModals(),$(window).scroll(windowScroll),setTimeout(function(){$("#AdvancedSearchPanel").css("position","absolute")},300),$("#HeaderSearchInput").autocomplete({source:"../../Home/SearchAutocomplete/?Type=General",minLength:2,select:function(e,t){AutocompleteResultJustEntered=!0,setTimeout(function(){AutocompleteResultJustEntered=!1},100)}}),$("#HeaderSearchInput_Title").autocomplete({source:"../../Home/SearchAutocomplete/?Type=Title",minLength:2,select:function(e,t){AutocompleteResultJustEntered=!0,setTimeout(function(){AutocompleteResultJustEntered=!1},100)}}),$("#HeaderSearchInput_Author").autocomplete({source:"../../Home/SearchAutocomplete/?Type=Author",minLength:2,select:function(e,t){AutocompleteResultJustEntered=!0,setTimeout(function(){AutocompleteResultJustEntered=!1},100)}}),$("#HeaderSearchInput_Description").autocomplete({source:"../../Home/SearchAutocomplete/?Type=Description",minLength:2,select:function(e,t){AutocompleteResultJustEntered=!0,setTimeout(function(){AutocompleteResultJustEntered=!1},100)}}),$("#HeaderSearchInput_Keywords").autocomplete({source:"../../Home/SearchAutocomplete/?Type=Keywords",minLength:2,select:function(e,t){AutocompleteResultJustEntered=!0,setTimeout(function(){AutocompleteResultJustEntered=!1},100)}}),$("#HeaderSearchInput_ISBN").autocomplete({source:"../../Home/SearchAutocomplete/?Type=ISBN",minLength:2,select:function(e,t){AutocompleteResultJustEntered=!0,setTimeout(function(){AutocompleteResultJustEntered=!1},100)}}),$("#HeaderSearchInput_DOI").autocomplete({source:"../../Home/SearchAutocomplete/?Type=DOI",minLength:2,select:function(e,t){AutocompleteResultJustEntered=!0,setTimeout(function(){AutocompleteResultJustEntered=!1},100)}}),$("#TopOfPageButton").click(function(){return $("html, body").stop().animate({scrollTop:0},250,"swing"),!1}),$("#BottomOfPageButton").click(function(){return $("html, body").stop().animate({scrollTop:$(document).height()-$(window).height()},250,"swing"),!1}),FetchUserNotifications(),$(window).scroll(CheckTopOfPageButtonVisibility),$(document).click(function(){AdvancedSearchJustToggled||AutocompleteResultJustEntered||ToggleAdvancedSearch(!0)}),$("#HeaderSearchInput, #HeaderSearchInput_Title , #HeaderSearchInput_Author , #HeaderSearchInput_Description , #HeaderSearchInput_Keywords , #HeaderSearchInput_ISBN , #HeaderSearchInput_DOI").keypress(function(e){13==e.which&&SearchButtonClicked()}),$(window).resize(function(){$(window).width();setTimeout(function(){CheckTopOfPageButtonVisibility()},700)}),$(window).resize(),setTimeout(function(){$(window).resize()},2e3),$("#AdvancedSearchPanel").click(function(){AdvancedSearchJustToggled=!0,setTimeout(function(){AdvancedSearchJustToggled=!1},50)}),"/search"==window.location.pathname.toLowerCase()&&($("#FindPublisher_Input").keyup(function(e){FindPublisherSearch(e)}),$("#FindJournal_Input").keyup(function(e){FindJournalSearch(e)}),$("#accordion .collapse").each(function(){$(this).on("show.bs.collapse",function(){$(this).parent().find(".filterPanelToggleIcon").addClass("toggled")}).on("hide.bs.collapse",function(){$(this).parent().find(".filterPanelToggleIcon").removeClass("toggled")})}),$("#perPage").change(function(){checkingURLState||UserChangedBinding({From:1,PerPage:Number($("#perPage").val().replace("PerPage",""))})}),$("#sortBy").change(function(){checkingURLState||UserChangedBinding({From:1,SortBy:$("#sortBy").val()})}),checkURLState(),window.onpopstate=checkURLState,$(window).resize(function(){Search(!0)})),"/search"!=window.location.pathname.toLowerCase()&&"/"!=window.location.pathname.toLowerCase()||(SetAdvancedSearchPublishersAutocomplete(),SetAdvancedSearchJournalsAutocomplete()),"/account/cart"==window.location.pathname.toLowerCase()&&(LoadBasketItems(),$("#UseCreditCheckbox").change(function(){RefreshCartFormPrices(),$("[name=UseCreditCheckbox]").val($("#UseCreditCheckbox").prop("checked"))})),0==window.location.pathname.toLowerCase().indexOf("/account/history")&&(WaitingToggle(!0),$.post("../../Account/HistoryList",{},function(e){if(WaitingToggle(!1),0==e.Data.length)$("[id=TransactionsTable] tbody").html('<tr><td colspan="20" style="text-align:center;">'+Resource["No transactions have been registered in your account!"]+"</td></tr>");else{$("[id=TransactionsTable] tbody").html("");for(var t=0;t<e.Data.length;t++){for(var a="",r=1;r<=e.Data[t].FilePartsCount;r++)a+='<a href="../../Account/Download/?key='+e.Data[t].DownloadKey+"&filePart="+r+'" class="btn btn-sm btn-success" style="margin-bottom:5px; margin-top:5px; min-width:100px;" >'+(1==e.Data[t].FilePartsCount?Resource.Download:Resource.Part+" "+r)+"</a>";e.Data[t].HasCrackFile&&(a+='<a href="../../Account/Download/?key='+e.Data[t].DownloadKey+'&filePart=crack" class="btn btn-sm btn-success" style="margin-bottom:5px; margin-top:5px; min-width:100px;" >'+Resource.Crack+"</a>");var o=null!=e.Data[t].BoughtResourceId&&-1!=FromResourceIds.indexOf(e.Data[t].BoughtResourceId)?"background-color:rgba(200, 255, 200, 0.5);":"",i=12*Math.abs(e.Data[t].CreditChange).toString().length,n='<tr>    <td style="'+o+' vertical-align:middle; text-align:center;">        '+e.Data[t].DateTime+'    </td>    <td style="'+o+' vertical-align:middle; text-align:center;">        '+e.Data[t].TransactionType+'    </td>    <td style="min-width:'+i+"px;"+o+" vertical-align:middle; font-weight: bold; color: "+(e.Data[t].CreditChange>0?"#0c0":"#e00")+"; "+("fa"!=SiteLang?"direction:rtl;":"")+'">'+ReplaceLatinDigits(("$"==Currency?Math.abs(e.Data[t].CreditChange).toFixed(2).replace(".",'<span style="font-weight: bold; font-size: 120%; line-height: 20%; margin: 0px 3px;">.</span>'):Math.abs(e.Data[t].CreditChange).toString()).replace(/\B(?=(\d{3})+(?!\d))/g,","))+"&nbsp;"+(e.Data[t].CreditChange>0?"+":"-")+'    </td>    <td style="min-width:'+i+"px;"+o+' vertical-align:middle;">'+ReplaceLatinDigits(("$"==Currency?e.Data[t].CreditRemainder.toFixed(2).replace(".",'<span style="font-weight: bold; font-size: 120%; line-height: 20%; margin: 0px 3px;">.</span>'):e.Data[t].CreditRemainder.toString()).replace(/\B(?=(\d{3})+(?!\d))/g,","))+"    </td>    <td "+(null!=e.Data[t].BoughtResourceId&&-1!=FromResourceIds.indexOf(e.Data[t].BoughtResourceId)?'class="SourceResource"':"")+' style="'+o+" vertical-align:middle; "+(null!=e.Data[t].BoughtResourceId&&-1!=FromResourceIds.indexOf(e.Data[t].BoughtResourceId)?"font-weight:bold;":"")+'">        '+(null==e.Data[t].BoughtResourceId?"":'<a href="../../Item/?id='+e.Data[t].BoughtResourceId+'" >'+e.Data[t].BoughtResourceTitle+"</a>")+'    </td>    <td class="FileSizeCell" style="'+o+' vertical-align:middle; direction:ltr;">        '+(null==e.Data[t].FileSize?"":e.Data[t].FileSize.replace(" ","&nbsp;"))+'    </td>    <td class="PasswordCell" style="'+o+' vertical-align:middle;">        '+(null==e.Data[t].Password?"":e.Data[t].Password)+'    </td>    <td class="DownloadCell" style="'+o+' vertical-align:middle;">        '+(null==e.Data[t].BoughtResourceId?"":null!=e.Data[t].DownloadKey?a:'<button class="btn btn-sm btn-info" style="min-width:100px;" onclick="CreateDownloadLink($(this), \''+e.Data[t].BoughtResourceId+"', false); return false;\" >"+Resource["Create download Link"]+"</button>")+'    </td>    <td class="RemainingTimeCell" style="'+o+' vertical-align:middle;">        '+(null==e.Data[t].BoughtResourceId?"":null!=e.Data[t].RemainingTime?e.Data[t].RemainingTime+(""==e.Data[t].RemainingTime?"":"′"):"")+"    </td></tr>",s='<tr>    <td style="'+o+' vertical-align:middle; text-align:center; border-bottom:none;">        '+e.Data[t].DateTime+'    </td>    <td style="'+o+' vertical-align:middle; text-align:center; border-bottom:none;">        '+e.Data[t].TransactionType+'    </td>    <td style="border-bottom:none; min-width:'+.6*i+"px;"+o+" vertical-align:middle; font-weight: bold; color: "+(e.Data[t].CreditChange>0?"#0c0":"#e00")+';">        '+ReplaceLatinDigits(Math.abs(e.Data[t].CreditChange).toString().replace(/\B(?=(\d{3})+(?!\d))/g,","))+"&nbsp;"+(e.Data[t].CreditChange>0?"+":"-")+'    </td>    <td style="border-bottom:none; min-width:'+.6*i+"px;"+o+' vertical-align:middle;">        '+ReplaceLatinDigits(e.Data[t].CreditRemainder.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","))+'    </td>    <td style="'+o+' vertical-align:middle; border-bottom:none; text-align:center;">        '+(null!=e.Data[t].BoughtResourceId?'<button class="ExpandButton" style="border: none; outline:none; background: transparent; color: #22a6bb; font-size: 200%; padding: 1px 2px 0px 2px; line-height: 0.9;" onclick="ToggleHistoryDetailRow($(this), \'#HistoryDetailRow_'+t+'\');" ><i class="fa fa-plus-square-o" aria-hidden="true"></i></button>':"")+"        "+(null!=e.Data[t].BoughtResourceId?'<button class="CollapseButton" style="display:none; border: none; outline:none; background: transparent; color: #22a6bb; font-size: 200%; padding: 1px 2px 0px 2px; line-height: 0.9;" onclick="ToggleHistoryDetailRow($(this), \'#HistoryDetailRow_'+t+'\');" ><i class="fa fa-minus-square-o" aria-hidden="true"></i></button>':"")+"    </td></tr>";null!=e.Data[t].BoughtResourceId&&(s+='<tr><td style="height:0px; padding:0px; border:none;"></td></tr><tr>    <td colspan="20" style="padding:0px; border:none;">        <div id="HistoryDetailRow_'+t+'" style="display:none; padding:5px;">            <table style="width:100%; border:1px solid #ddd;">                <tr>                    <td style="text-align:right;">                        '+Resource["Purchased file"].replace(/ /gi,"&nbsp;")+":                    </td>                    <td "+(null!=e.Data[t].BoughtResourceId&&-1!=FromResourceIds.indexOf(e.Data[t].BoughtResourceId)?'class="SourceResource"':"")+' style="'+o+" vertical-align:middle; "+(null!=e.Data[t].BoughtResourceId&&-1!=FromResourceIds.indexOf(e.Data[t].BoughtResourceId)?"font-weight:bold;":"")+'">                        '+(null==e.Data[t].BoughtResourceId?"":'<a href="../../Item/?id='+e.Data[t].BoughtResourceId+'" >'+e.Data[t].BoughtResourceTitle+"</a>")+'                    </td>                </tr>                <tr>                    <td style="text-align:right;">                        '+Resource["File Size"].replace(/ /gi,"&nbsp;")+':                    </td>                    <td class="FileSizeCell" style="'+o+' vertical-align:middle; direction:ltr;">                        '+(null==e.Data[t].FileSize?"":e.Data[t].FileSize.replace(" ","&nbsp;"))+'                    </td>                </tr>                <tr>                    <td style="text-align:right;">                        '+Resource["Zip File Password"].replace(/ /gi,"&nbsp;")+':                    </td>                    <td class="PasswordCell" style="'+o+' vertical-align:middle;">                        '+(null==e.Data[t].Password?"":e.Data[t].Password)+'                    </td>                </tr>                <tr>                    <td style="text-align:right;">                        '+Resource.Download.replace(/ /gi,"&nbsp;")+':                    </td>                    <td class="DownloadCell" style="'+o+' vertical-align:middle;">                        '+(null==e.Data[t].BoughtResourceId?"":null!=e.Data[t].DownloadKey?a:'<button class="btn btn-sm btn-info" style="min-width:100px;" onclick="CreateDownloadLink($(this), \''+e.Data[t].BoughtResourceId+"', true); return false;\" >"+Resource["Create download Link"]+"</button>")+'                    </td>                </tr>                <tr>                    <td style="text-align:right;">                        '+Resource["Remaining Time"].replace(/ /gi,"&nbsp;")+':                    </td>                    <td class="RemainingTimeCell" style="'+o+' vertical-align:middle;">                        '+(null==e.Data[t].BoughtResourceId?"":null!=e.Data[t].RemainingTime?e.Data[t].RemainingTime+(""==e.Data[t].RemainingTime?"":"′"):"")+"                    </td>                </tr>            </table>        </div>    </td></tr>"),$("#TransactionsContainerWide [id=TransactionsTable] > tbody").append(n),$("#TransactionsContainerSmall [id=TransactionsTable] > tbody").append(s)}0!=$(".SourceResource").length&&$(window).scrollTop($(".SourceResource").position().top-$(window).height()/2)}},"json")),"/account/creditcharge"==window.location.pathname.toLowerCase()&&($("#ChargingCreditAmount").on("input",function(e){setTimeout(function(){var e=$("#ChargingCreditAmount").val().replace(/۰/gi,"0").replace(/۱/gi,"1").replace(/۲/gi,"2").replace(/۳/gi,"3").replace(/۴/gi,"4").replace(/۵/gi,"5").replace(/۶/gi,"6").replace(/۷/gi,"7").replace(/۸/gi,"8").replace(/۹/gi,"9").replace(/[^0-9.]/gi,"");""==e&&(e="0"),$("#ChargingCreditAmount").val(ReplaceLatinDigits(Number(e).toString().replace(/\B(?=(\d{3})+(?!\d))/g,","))),RefreshSelectedPackage()},1)}),"fa"==SiteLang?$("#ChargingCreditAmount").val(NeededCredit/1e3):$("#ChargingCreditAmount").val(NeededCredit),$("#ChargingCreditAmount").trigger("input"),$(".CreditChargePackage").click(function(){if(!$(this).hasClass("Active")){for(var e=$(this).attr("data-packageId"),t=null,a=0;a<Packages.length;a++)if(Packages[a].Id==e){t=Packages[a];break}"fa"==SiteLang?$("#ChargingCreditAmount").val(t.Credit/1e3):$("#ChargingCreditAmount").val(t.Credit),$("#ChargingCreditAmount").trigger("input")}})),"/item/"==window.location.pathname.toLowerCase()&&(RelatedResourcesContainerSize=$("#RelatedResourcesContainer").width(),WindowIsSmall=RelatedResourcesContainerSize<750,$(window).resize(function(){var e=$("#RelatedResourcesContainer").width(),t=e<750;e!=RelatedResourcesContainerSize&&(RelatedResourcesContainerSize=e,setTimeout(OnResizeForRelatedResources,100)),t!=WindowIsSmall&&(WindowIsSmall=t,LargeTileIsEnabled?WindowIsSmall?(RelatedResourcesCurrentPage=Math.floor((4*RelatedResourcesCurrentPage+RelatedResourcesCurrentPage_LargeTileIndex)/2),RelatedResourcesCurrentPage_LargeTileIndex%=2):(RelatedResourcesCurrentPage_LargeTileIndex=RelatedResourcesCurrentPage%2*2+RelatedResourcesCurrentPage_LargeTileIndex,RelatedResourcesCurrentPage=Math.floor(RelatedResourcesCurrentPage/2)):WindowIsSmall?RelatedResourcesCurrentPage*=2:RelatedResourcesCurrentPage=Math.floor(RelatedResourcesCurrentPage/2),InitializeRelatedResourcesSection())}),$.post("../../Search/GetRelatedResources/"+window.location.search,{},function(e){RelatedResources=e.Resources,RelatedResourcesCurrentPage=0,InitializeRelatedResourcesSection(),$("#WaitingDIVForRelatedResources").hide()},"json"))});var SampleFileCurrentIndex,SampleFileCurrentType,AdvancedSearchShowing=!1,AdvancedSearchJustToggled=!1,DontToggle=!1,SearchButtonWasJustClicked=!1,CloseSampleFilePermission=!0,PaymentModalLoaded=!1;window.addEventListener("message",function(e){if("PaymentModalLoaded"==e.data)$("#PaymentModal").modal("show"),$(".circular-loader").hide(),PaymentModalLoaded=!0;else if("CloseModal"==e.data)$("#PaymentModal").modal("hide");else if(0==e.data.indexOf("ContinueButtonClicked_")){var t=decodeURI(e.data.replace("ContinueButtonClicked_",""));window.location=t}});var sectionsHeight,currentSection,RelatedResourcesNavigationDisabled=!1,RelatedResourcesCurrentPage=0,RelatedResourcesCurrentPage_LargeTileIndex=0,RelatedResources=[],PagesHtml=[],LargePagesHtml=[],LargeTileIsEnabled=!1,RelatedResourcesAddedToCart={},isOpera=!!window.opr&&!!opr.addons||!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,isFirefox="undefined"!=typeof InstallTrigger,isSafari=/constructor/i.test(window.HTMLElement)||function(e){return"[object SafariRemoteNotification]"===e.toString()}(!window.safari||"undefined"!=typeof safari&&safari.pushNotification),isIE=!!document.documentMode,isEdge=!isIE&&!!window.StyleMedia,isChrome=!(!window.chrome||!window.chrome.webstore&&!window.chrome.runtime),isBlink=(isChrome||isOpera)&&!!window.CSS,keys={37:1,38:1,39:1,40:1},AutoScrollingInProgress=(isChrome=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor),!1),recentScrolls=[],IsMobile=!1,WindowSizes=null,NumberOfResourcesCounted=!1;